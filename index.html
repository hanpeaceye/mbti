<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—°ì¸ê³¼ ë‚˜ì˜ MBTI ê¶í•© & ì•ˆ ì‹¸ìš°ëŠ” ê¿€íŒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-33VJ9T8RW5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-33VJ9T8RW5');
    </script>

    <meta property="og:type" content="website">
    <meta property="og:title" content="ì—°ì¸ê³¼ ë‚˜ì˜ MBTI ê¶í•© & ì•ˆ ì‹¸ìš°ëŠ” ê¿€íŒ ğŸ’–">
    <meta property="og:description" content="ìš°ë¦¬ ì»¤í”Œì€ ì™œ ì‹¸ìš¸ê¹Œ? ì„œë¡œì˜ ì†ë§ˆìŒë¶€í„° 200% ë¦¬ì–¼ ì—°ì•  ì²˜ë°©ì „ê¹Œì§€! 16ê°€ì§€ ìœ í˜• ì™„ë²½ ë¶„ì„ ë³´ê³ ì„œ">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/2074/2074844.png">
    <meta property="og:url" content="https://aimbti.xyz">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;800&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #fff0f5; }
        
        .fade-in { animation: fadeIn 0.8s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .chemistry-card { background: linear-gradient(145deg, #ffffff, #fff5f7); border: 1px solid #ffe4e6; }
        .vs-badge { background: linear-gradient(45deg, #ff6b6b, #ff8e53); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .bubble-left::before { content: ''; position: absolute; left: -12px; top: 24px; border-width: 12px 12px 12px 0; border-color: transparent white transparent transparent; filter: drop-shadow(-2px 0 2px rgba(0,0,0,0.05)); }
        .bubble-right::before { content: ''; position: absolute; right: -12px; top: 24px; border-width: 12px 0 12px 12px; border-color: transparent white transparent transparent; filter: drop-shadow(2px 0 2px rgba(0,0,0,0.05)); }
        
        .coupang-btn-gradient { background: linear-gradient(to right, #e11f1f, #ff9000); }
        
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; border-color: #ef4444 !important; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

        .bounce-custom { animation: bounce-custom 2s infinite; }
        @keyframes bounce-custom {
            0%, 100% { transform: translateY(-5%); animation-timing-function: cubic-bezier(0.8,0,1,1); }
            50% { transform: translateY(0); animation-timing-function: cubic-bezier(0,0,0.2,1); }
        }
    </style>
</head>
<body class="text-slate-800 min-h-screen">

    <div class="w-full max-w-5xl mx-auto px-4 py-10">

        <div id="input-page" class="flex flex-col justify-center min-h-[85vh] fade-in">
            <div class="text-center mb-12">
                <span class="inline-block bg-white border border-pink-200 text-pink-500 text-xs font-bold px-4 py-1.5 rounded-full mb-4 shadow-sm tracking-wide">Couple Compatibility Test</span>
                <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 mb-4 leading-tight">
                    ì—°ì¸ê³¼ ë‚˜ì˜ MBTI ê¶í•©,<br class="md:hidden">ê·¸ë¦¬ê³  <span class="text-pink-500">ì•ˆ ì‹¸ìš°ëŠ” ê¿€íŒ!</span> ğŸ’–
                </h1>
                <p class="text-slate-500 text-base md:text-lg">ì„œë¡œ ë‹¤ë¥¸ ìš°ë¦¬, ì–´ë–»ê²Œ ë§ì¶°ê°€ì•¼ í• ê¹Œìš”? <br class="md:hidden">200% ë¦¬ì–¼ ì—°ì•  ì²˜ë°©ì „</p>
            </div>

            <div class="bg-white rounded-[2rem] p-8 md:p-12 shadow-2xl shadow-pink-100 max-w-3xl mx-auto w-full border border-white">
                <div class="flex flex-col gap-10">
                    <div class="flex flex-col md:flex-row items-center justify-between gap-8">
                        <div class="w-full group">
                            <label class="block text-sm font-bold text-slate-500 mb-3 ml-2 group-hover:text-blue-500 transition-colors">ë‚˜ì˜ MBTI</label>
                            <div class="relative">
                                <input id="mbti-a" list="mbti-list" oninput="this.value = this.value.toUpperCase()" onkeyup="updateFavicon(this.value)" class="w-full bg-slate-50 border-2 border-slate-100 rounded-2xl p-5 text-center text-3xl font-black uppercase text-slate-800 focus:border-blue-400 focus:ring-4 focus:ring-blue-100 outline-none transition placeholder-slate-300 tracking-widest" placeholder="ENTP" maxlength="4">
                                <div class="absolute left-5 top-1/2 -translate-y-1/2 w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-500"><i class="fas fa-user"></i></div>
                            </div>
                        </div>
                        <span class="text-5xl font-black italic vs-badge transform md:rotate-12">VS</span>
                        <div class="w-full group">
                            <label class="block text-sm font-bold text-slate-500 mb-3 ml-2 group-hover:text-pink-500 transition-colors">ì—°ì¸ì˜ MBTI</label>
                            <div class="relative">
                                <input id="mbti-b" list="mbti-list" oninput="this.value = this.value.toUpperCase()" class="w-full bg-slate-50 border-2 border-slate-100 rounded-2xl p-5 text-center text-3xl font-black uppercase text-slate-800 focus:border-pink-400 focus:ring-4 focus:ring-pink-100 outline-none transition placeholder-slate-300 tracking-widest" placeholder="ISFJ" maxlength="4">
                                <div class="absolute left-5 top-1/2 -translate-y-1/2 w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center text-pink-500"><i class="fas fa-heart"></i></div>
                            </div>
                        </div>
                    </div>
                    
                    <button id="analyze-btn" class="w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-6 rounded-2xl shadow-xl hover:shadow-2xl text-lg md:text-xl active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-3 group">
                        <span>ê²°ê³¼ ë³´ê¸°</span> <i class="fas fa-rocket group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="result-page" class="hidden fade-in pb-20">
            <div class="max-w-4xl mx-auto mb-8 flex items-center justify-between">
                <button id="back-btn" class="text-slate-400 hover:text-slate-800 font-bold flex items-center gap-2 transition-colors px-4 py-2 rounded-lg hover:bg-slate-100">
                    <i class="fas fa-arrow-left"></i> ì²˜ìŒìœ¼ë¡œ
                </button>
                <span class="text-xs font-bold text-pink-400 bg-pink-50 px-3 py-1 rounded-full">LOVE REPORT</span>
            </div>
            <div id="result-content"></div>
        </div>

    </div>

    <datalist id="mbti-list"></datalist>
    <link id="dynamic-favicon" rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§¡</text></svg>">

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const validMbtiList = ["ISTJ", "ISFJ", "INFJ", "INTJ", "ISTP", "ISFP", "INFP", "INTP", "ESTP", "ESFP", "ENFP", "ENTP", "ESTJ", "ESFJ", "ENFJ", "ENTJ"];
            
            // [ë°ì´í„° ì—…ê·¸ë ˆì´ë“œ] ì„¤ëª…ì„ ë” í’ë¶€í•˜ê²Œ ìˆ˜ì •
            const mbtiTraits = {
                "ENTP": [{ tag: "ğŸ¤ ë©ˆì¶”ì§€ ì•ŠëŠ” ì•„ì´ë””ì–´ ë±…í¬", desc: "ë¨¸ë¦¿ì†ì€ í•­ìƒ ìƒˆë¡œìš´ ì‚¬ì—…ê³¼ ëª¨í—˜ êµ¬ìƒìœ¼ë¡œ ê°€ë“ ì°¨ ìˆì–´ìš”. 'ì§€ë£¨í•œ ê²ƒ'ì´ ì£½ê¸°ë³´ë‹¤ ì‹«ì€ ì¬ì¹˜ ë§Œì  ë§¤ë ¥ìŸì´!", strength: "í˜ì‹ ì ì¸ ì°½ì˜ë ¥ê³¼ ìœ„íŠ¸", weakness: "ë’·ì‹¬ ë¶€ì¡±ê³¼ ì¦ì€ ì‹«ì¦" }, { tag: "ğŸ¤¡ ì²œì¬ì ì¸ ì•…ë™", desc: "ë‚¨ë“¤ì´ 'ì˜ˆ' í•  ë•Œ 'ì•„ë‹ˆì˜¤'ë¼ê³  ë§í•˜ë©° í† ë¡ í•˜ê¸°ë¥¼ ì¦ê²¨ìš”. ì—‰ëš±í•´ ë³´ì´ì§€ë§Œ ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì€ íƒ€ì˜ ì¶”ì¢…ì„ ë¶ˆí—ˆí•©ë‹ˆë‹¤.", strength: "ë¹„íŒì  ì‚¬ê³ ì™€ í•´ê²°ëŠ¥ë ¥", weakness: "ëˆˆì¹˜ ì—†ëŠ” íŒ©íŠ¸ í­ê²©" }],
                "ISTJ": [{ tag: "ğŸ“‰ ê±¸ì–´ ë‹¤ë‹ˆëŠ” ì—‘ì…€ íŒŒì¼", desc: "ì•½ì† ì‹œê°„ 1ë¶„ë„ ì–´ê¸°ì§€ ì•ŠëŠ” ì² ë‘ì² ë¯¸í•¨ì˜ ì†Œìœ ì. ë°ì´íŠ¸ ì½”ìŠ¤ë¶€í„° ë¯¸ë˜ ê³„íšê¹Œì§€ ì™„ë²½í•˜ê²Œ ì§œì—¬ ìˆëŠ” ë“ ë“ í•œ ì• ì¸ì…ë‹ˆë‹¤.", strength: "ë¬´í•œí•œ ì±…ì„ê°ê³¼ ì„±ì‹¤í•¨", weakness: "ì˜ˆìƒ ë°– ìƒí™©ì— ë‹¹í™©í•¨" }, { tag: "ğŸ›¡ï¸ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ì›ì¹™ì£¼ì˜ì", desc: "ë¹ˆë§ì€ ì ˆëŒ€ ëª» í•˜ì§€ë§Œ, í•œë²ˆ ë±‰ì€ ë§ì€ í•˜ëŠ˜ì´ ë‘ ìª½ ë‚˜ë„ ì§€ì¼œìš”. ê²°í˜¼ ìƒëŒ€ë¡œëŠ” ìµœê³ ì˜ ì•ˆì •ê°ì„ ì¤ë‹ˆë‹¤.", strength: "ê¹Šì€ ì‹ ë¢°ê°", weakness: "ìƒˆë¡œìš´ ë³€í™” ê±°ë¶€" }],
                "ISFJ": [{ tag: "ğŸŒ» ë‹¤ì •í•œ ìˆ˜í˜¸ ì²œì‚¬", desc: "ë‚˜ë³´ë‹¤ ì—°ì¸ì„ ë¨¼ì € ì±™ê¸°ëŠ” ë°°ë ¤ì˜ ì•„ì´ì½˜. ê²‰ìœ¼ë¡  ì›ƒê³  ìˆì–´ë„ ì†ìœ¼ë¡œëŠ” ë§ì€ ìƒê°ì„ í•˜ê³  ìˆìœ¼ë‹ˆ ì„¸ì‹¬í•˜ê²Œ ì‚´í´ì¤˜ì•¼ í•´ìš”.", strength: "ì„¬ì„¸í•œ ê¸°ì–µë ¥ê³¼ ë°°ë ¤", weakness: "ê±°ì ˆì„ ëª» í•´ ë™ë™ ì•“ìŒ" }, { tag: "ğŸ¡ ê°€ì •ì ì¸ í‰í™”ì£¼ì˜ì", desc: "í™”ë ¤í•œ ì´ë²¤íŠ¸ë³´ë‹¤ ì†Œì†Œí•˜ê³  ì•ˆì •ì ì¸ í–‰ë³µì„ ì¶”êµ¬í•´ìš”. ë‚´ ì‚¬ëŒì—ê²ŒëŠ” ê°„ ì“¸ê°œ ë‹¤ ë¹¼ì£¼ëŠ” í—Œì‹ ì ì¸ ì‚¬ë‘ê¾¼ì…ë‹ˆë‹¤.", strength: "í—Œì‹ ì ì¸ íƒœë„", weakness: "ë³€í™”ì— ëŒ€í•œ ë§‰ì—°í•œ ë‘ë ¤ì›€" }],
                "ENFP": [{ tag: "ğŸ‰ ì¸ê°„ ê³¨ë“  ë¦¬íŠ¸ë¦¬ë²„", desc: "ì‚¬ëŒì„ ë„ˆë¬´ ì¢‹ì•„í•˜ê³  ê¸ˆë°© ì‚¬ë‘ì— ë¹ ì§€ëŠ” ì‚¬ë‘ë‘¥ì´. ê°ì • í‘œí˜„ì´ ì†”ì§í•˜ê³  ë¦¬ì•¡ì…˜ì´ ì¢‹ì•„ì„œ ê°™ì´ ìˆìœ¼ë©´ ì‹œê°„ ê°€ëŠ” ì¤„ ëª°ë¼ìš”.", strength: "ê¸ì •ì ì¸ í•´í”¼ ë°”ì´ëŸ¬ìŠ¤", weakness: "ì‚¬ì†Œí•œ ë§ì— ì‰½ê²Œ ìƒì²˜ë°›ìŒ" }, { tag: "âœ¨ ë°˜ì§ì´ëŠ” ì˜ê° ë¶€ì", desc: "í•˜ê³  ì‹¶ì€ ê²Œ 100ê°€ì§€! ê½‚íˆë©´ ë’¤ë„ ì•ˆ ëŒì•„ë³´ê³  ì§ì§„í•˜ëŠ” ë¶ˆë„ì € ê°™ì€ ì—´ì •ì´ ë§¤ë ¥ì ì´ì—ìš”.", strength: "ì‚¬ëŒì„ ëª¨ìœ¼ëŠ” í˜", weakness: "ê·¹ì‹¬í•œ ê°ì • ê¸°ë³µ" }],
                "ESFJ": [{ tag: "ğŸ° ì‚¬ë‘ë‘¥ì´ í•µì¸ì‹¸", desc: "ê¸°ë…ì¼, ì‚¬ì†Œí•œ ì´ë²¤íŠ¸ í•˜ë‚˜ë„ ë†“ì¹˜ì§€ ì•Šê³  ì±™ê²¨ì¤˜ìš”. ì£¼ë³€ ì‚¬ëŒë“¤ê¹Œì§€ ì±™ê¸°ëŠ” ì„¼ìŠ¤ ë•ë¶„ì— ì–´ë””ì„œë‚˜ í™˜ì˜ë°›ì•„ìš”.", strength: "ìµœê³ ì˜ ê³µê° ëŠ¥ë ¥", weakness: "ë¹„íŒì— í¬ê²Œ ìƒì²˜ë°›ìŒ" }, { tag: "ğŸ¤ ë‚´ì¡°/ì™¸ì¡°ì˜ ëíŒì™•", desc: "ë‚´ ì—°ì¸ì´ ì–´ë”” ê°€ì„œ ê¸°ì£½ëŠ” ê¼´ì€ ì ˆëŒ€ ëª» ë³´ì£ . ì‚¬íšŒìƒí™œ ë§Œë ™ ìŠ¤í‚¬ë¡œ ì—°ì¸ì„ ë¹›ë‚˜ê²Œ í•´ì£¼ëŠ” ëŠ¥ë ¥ìì…ë‹ˆë‹¤.", strength: "íƒì›”í•œ ì‚¬êµì„±", weakness: "íƒ€ì¸ì˜ ì‹œì„ ì„ ë„ˆë¬´ ì˜ì‹í•¨" }],
                "INTJ": [{ tag: "â™Ÿï¸ ì°¨ê°€ìš´ ë„ì‹œì˜ ì „ëµê°€", desc: "í‘œí˜„ì€ ì„œíˆ´ì§€ë§Œ, ë¨¸ë¦¿ì†ì—” ì´ë¯¸ ìš°ë¦¬ ë¯¸ë˜ ê³„íš(ë…¸í›„ ëŒ€ë¹„ê¹Œì§€)ì´ ë‹¤ ì„¸ì›Œì ¸ ìˆì–´ìš”. ì•Œë©´ ì•Œìˆ˜ë¡ ì§„êµ­ì¸ ì‚¬ëŒ!", strength: "ê¹Šì€ í†µì°°ë ¥ê³¼ ë¹„ì „", weakness: "ê°ì • í‘œí˜„ì´ ë§¤ìš° ì„œíˆ¼" }, { tag: "ğŸ¦‰ ì§€ì ì¸ ë‡Œì„¹ë‚¨ë…€", desc: "ë°°ìš¸ ì ì´ ì •ë§ ë§ì€ ì‚¬ëŒì´ì—ìš”. ë¬´ë…¼ë¦¬, ê°ì • í˜¸ì†Œë³´ë‹¤ëŠ” ë…¼ë¦¬ì ì´ê³  ê±´ì„¤ì ì¸ ëŒ€í™”ë¥¼ ë‚˜ëˆŒ ë•Œ ì„¹ì‹œí•¨ì„ ëŠë‚ë‹ˆë‹¤.", strength: "ëƒ‰ì² í•œ ë¬¸ì œ í•´ê²°", weakness: "ì§€ë‚˜ì¹œ ì™„ë²½ì£¼ì˜ ì„±í–¥" }],
                "INFP": [{ tag: "ğŸ§š ê¿ˆê¾¸ëŠ” ë‚­ë§Œê°€", desc: "ìì‹ ë§Œì˜ ì„¸ê³„ê°€ í™•ê³ í•˜ê³  ì˜ˆìˆ ì  ê°ìˆ˜ì„±ì´ í’ë¶€í•´ìš”. í˜„ì‹¤ ê°ê°ì€ ì¢€ ë–¨ì–´ì ¸ë„ ë‚­ë§Œì ì¸ ì‚¬ë‘ì„ ê¿ˆê¾¸ëŠ” ìˆœìˆ˜í•¨ì´ ìˆìŠµë‹ˆë‹¤.", strength: "ê¹Šì€ ì´í•´ì‹¬ê³¼ ìˆœìˆ˜í•¨", weakness: "ìœ ë¦¬ë©˜íƒˆê³¼ íšŒí”¼ ì„±í–¥" }, { tag: "ğŸ“š ì† ê¹Šì€ ë¬¸í•™ì†Œë…„/ì†Œë…€", desc: "ë§í•˜ì§€ ì•Šì•„ë„ ìƒëŒ€ì˜ ê°ì •ì„ ê¸°ê°€ ë§‰íˆê²Œ ìºì¹˜í•´ìš”. ë‹¤ë§Œ í˜¼ìë§Œì˜ ì‹œê°„ì´ ê¼­ í•„ìš”í•œ ë‚´í–¥ì ì¸ ì˜í˜¼ì…ë‹ˆë‹¤.", strength: "ë”°ëœ»í•œ ìœ„ë¡œ ëŠ¥ë ¥", weakness: "í˜„ì‹¤ì ì¸ ë¬¸ì œ í•´ê²° ë¯¸í¡" }],
                "ESTJ": [{ tag: "ğŸ‘‘ ë“ ë“ í•œ ë¦¬ë”", desc: "í˜¸ë¶ˆí˜¸ê°€ í™•ì‹¤í•˜ê³  ë¦¬ë“œí•˜ëŠ” ê±¸ ì¢‹ì•„í•´ìš”. ë‹µë‹µí•œ ìƒí™©ì„ ë”± ì •ë¦¬í•´ì£¼ëŠ” ì‚¬ì´ë‹¤ ê°™ì€ ê²°ë‹¨ë ¥ì´ ë§¤ë ¥ í¬ì¸íŠ¸!", strength: "ê°•ë ¥í•œ ì¶”ì§„ë ¥", weakness: "ì§ì„¤ì  í™”ë²•ìœ¼ë¡œ ìƒì²˜ ì¤Œ" }, { tag: "ğŸ“ í˜„ì‹¤ì ì¸ ê³„íšì™•", desc: "ë°ì´íŠ¸ë„ íš¨ìœ¨ì ìœ¼ë¡œ! ì§•ì§•ê±°ë¦¬ëŠ” ê²ƒë³´ë‹¤ëŠ” ë”± ë–¨ì–´ì§€ëŠ” í•´ê²°ì±…ì„ ì œì‹œí•´ì£¼ëŠ” ë¯¿ìŒì§í•œ íŒŒíŠ¸ë„ˆì…ë‹ˆë‹¤.", strength: "í˜„ì‹¤ì ì¸ ìƒí™œë ¥", weakness: "ê³µê° ëŠ¥ë ¥ ë¶€ì¡±" }],
                // ... (ë‚˜ë¨¸ì§€ ìœ í˜•ë„ ê¸°ë³¸ íŒ¨í„´ ìœ ì§€í•˜ë˜ ë¡œì§ìœ¼ë¡œ ë³´ì™„)
            };
            
            const defaultTraits = {
                "INFJ": { tag: "ğŸ”® ì† ê¹Šì€ ì˜ˆì–¸ê°€", desc: "ê²‰ì€ ë¶€ë“œëŸ½ì§€ë§Œ ì†ì€ ë‹¨ë‹¨í•œ ì™¸ìœ ë‚´ê°•. ë§í•˜ì§€ ì•Šì•„ë„ ë‚´ ë§ˆìŒì„ ê¿°ëš«ì–´ ë³´ëŠ” ë“¯í•œ ì„¬ì„¸í•œ í†µì°°ë ¥ì´ ìˆì–´ìš”.", strength: "í†µì°°ë ¥", weakness: "ì˜ˆë¯¼í•¨" },
                "INTP": { tag: "ğŸ§ª ê²Œìœ¼ë¥¸ ì²œì¬", desc: "ê´€ì‹¬ ìˆëŠ” ë¶„ì•¼ì—” ë¯¸ì¹œ ë“¯ì´ íŒŒê³ ë“¤ì§€ë§Œ, ì—°ì• ì˜ ë°€ë‹¹ì´ë‚˜ ê°ì • ì‹¸ì›€ì€ ê·€ì°®ì•„í•´ìš”. ì†”ì§ë‹´ë°±í•¨ì´ ë§¤ë ¥!", strength: "ë¶„ì„ë ¥", weakness: "ê³µê° ì„œíˆ¼" },
                "ENTJ": { tag: "ğŸ”¥ ì—´ì • ë¶ˆë„ì €", desc: "í•¨ê»˜ ì„±ì¥í•˜ëŠ” ì—°ì• ë¥¼ ì›í•´ìš”. ì¼ë„ ì‚¬ë‘ë„ ìµœê³ ë¡œ í•´ë‚´ê³  ì‹¶ì€ ì•¼ë§ ìˆëŠ” ë©‹ì§„ íŒŒíŠ¸ë„ˆì…ë‹ˆë‹¤.", strength: "ë¦¬ë”ì‹­", weakness: "ê³µê° ë¶€ì¡±" },
                "ENFJ": { tag: "ğŸ¤ ì •ì˜ë¡œìš´ ì–¸ë³€ê°€", desc: "ì—°ì¸ì˜ ì„±ì¥ì„ ë•ëŠ” ê±¸ ê¸°ì¨ìœ¼ë¡œ ì•Œì•„ìš”. ì˜¤ì§€ë–ì´ ë„“ë‹¤ëŠ” ì†Œë¦´ ë“£ì§€ë§Œ ê·¸ë§Œí¼ ì‚¬ë‘ê³¼ ì •ì´ ë„˜ì¹©ë‹ˆë‹¤.", strength: "ì„¤ë“ë ¥", weakness: "ì§€ë‚˜ì¹œ í¬ìƒ" },
                "ISTP": { tag: "ğŸ”§ ì‹œí¬í•œ ë§ŒëŠ¥ë§¨", desc: "ê·€ì°®ì€ ê±¸ ì‹«ì–´í•˜ì§€ë§Œ í•„ìš”í•  ë• ëšë”± í•´ê²°í•´ì¤˜ìš”. ë¬´ëšëší•´ ë³´ì´ì§€ë§Œ ì€ê·¼íˆ ë’¤ì—ì„œ ì±™ê²¨ì£¼ëŠ” ì¸¤ë°ë ˆ!", strength: "ì†ì¬ì£¼", weakness: "ë¬´ê´€ì‹¬" },
                "ISFP": { tag: "ğŸ¨ ì¹¨ëŒ€ ë°–ì€ ìœ„í—˜í•´", desc: "ì§‘ìˆœì´/ì§‘ëŒì´ì§€ë§Œ ë§‰ìƒ ë°ì´íŠ¸í•˜ë©´ ì˜ ë†€ì•„ìš”. ê°ˆë“±ì„ ì‹«ì–´í•´ì„œ ì›¬ë§Œí•˜ë©´ ë‹¤ ë§ì¶°ì£¼ëŠ” í‰í™”ì£¼ì˜ìì…ë‹ˆë‹¤.", strength: "ì˜ˆìˆ ì  ê°ê°", weakness: "ê²Œìœ¼ë¦„" },
                "ESTP": { tag: "âš¡ ìŠ¤ë¦´ ì¦ê¸°ëŠ” ìŠ¹ë¶€ì‚¬", desc: "ê³ ë¯¼í•  ì‹œê°„ì— ì €ì§ˆëŸ¬ìš”! ë‚´ê¸°ë¥¼ ì¢‹ì•„í•˜ê³  ë’¤ë ì—†ëŠ” ì¿¨í•œ ì„±ê²© ë•ë¶„ì— ëŠ˜ ì¦ê±°ìš´ ì—°ì• ê°€ ê°€ëŠ¥í•´ìš”.", strength: "í–‰ë™ë ¥", weakness: "ì¶©ë™ì„±" },
                "ESFP": { tag: "ğŸ’ƒ í¥ ë¶€ì ì—°ì˜ˆì¸", desc: "ì¸ìƒì€ ì¦ê±°ì›Œì•¼ì£ ! ìš°ìš¸í•  í‹ˆì„ ì•ˆ ì£¼ëŠ” ë¶„ìœ„ê¸° ë©”ì´ì»¤. ì§„ì§€í•œ ëŒ€í™”ë³´ë‹¤ëŠ” ì‹ ë‚˜ëŠ” ê²½í—˜ì„ ì¢‹ì•„í•´ìš”.", strength: "ìŠ¤íƒ€ì„±", weakness: "ì§„ì§€í•¨ ë¶€ì¡±" }
            };

            function generateDynamicChemistry(typeA, typeB) {
                let score = 75; 
                let title = "ì•Œ ìˆ˜ ì—†ëŠ” ì´ëŒë¦¼"; 
                let desc = "ì„œë¡œ ë„ˆë¬´ ë‹¬ë¼ì„œ ì²˜ìŒì—” ì´í•´í•˜ê¸° í˜ë“¤ ìˆ˜ ìˆì–´ìš”. í•˜ì§€ë§Œ ê·¸ 'ë‹¤ë¦„'ì´ ì„œë¡œì—ê²Œ ì—†ëŠ” ë¶€ë¶„ì„ ì±„ì›Œì£¼ë©° ê°•ë ¬í•˜ê²Œ ëŒë¦¬ëŠ” ì´ìœ ê°€ ë©ë‹ˆë‹¤."; 
                let synergy = "ìƒˆë¡œìš´ ì„¸ê³„ì˜ ë°œê²¬"; 
                let conflict = "ìƒí™œ íŒ¨í„´ì˜ ì°¨ì´";
                
                let diffCount = 0; 
                for(let i=0; i<4; i++) if(typeA[i] !== typeB[i]) diffCount++;

                if (diffCount === 0) { 
                    title = "ê±°ìš¸ì„ ë³´ëŠ” ì‚¬ì´"; 
                    desc = "ë§ˆì¹˜ ë‚˜ ìì‹ ì„ ë³´ëŠ” ê²ƒ ê°™ì•„ìš”. ë§ì´ ì˜ í†µí•˜ê³  í¸ì•ˆí•˜ì§€ë§Œ, ë‚´ê°€ ì‹«ì–´í•˜ëŠ” ë‚˜ì˜ ë‹¨ì ì´ ìƒëŒ€ì—ê²Œì„œ ë³´ì¼ ë•Œ ë¬˜í•˜ê²Œ ì§œì¦ ë‚  ìˆ˜ ìˆì–´ìš”."; 
                    score = 85; conflict = "ë˜‘ê°™ì€ ë¬¸ì œë¡œ ë˜‘ê°™ì´ ì£¼ì €í•¨"; 
                } else if (diffCount === 4) { 
                    title = "ë‹¤ë¥¸ í–‰ì„±ì—ì„œ ì˜¨ ì»¤í”Œ"; 
                    desc = "ë¨¸ë¦¬ë¶€í„° ë°œëê¹Œì§€ ë‹¬ë¼ìš”! ì²˜ìŒì—” ë„ì €íˆ ì´í•´ê°€ ì•ˆ ê°€ì§€ë§Œ, ë‚´ê°€ ê°€ì§€ì§€ ëª»í•œ ëŠ¥ë ¥ì„ ê°€ì§„ ìƒëŒ€ì—ê²Œ ë¯¸ì¹œ ë“¯ì´ ëŒë¦¬ê²Œ ë©ë‹ˆë‹¤."; 
                    score = 95; synergy = "ì„œë¡œì˜ ì•½ì ì„ ì™„ë²½íˆ ë³´ì™„"; 
                } else {
                    if (typeA[1] !== typeB[1]) { // S vs N
                        title = "í˜„ì‹¤ê³¼ ì´ìƒì˜ ì¤„ë‹¤ë¦¬ê¸°";
                        desc = "í•œ ëª…ì€ ìˆ²ì„ ë³´ê³ (N), í•œ ëª…ì€ ë‚˜ë¬´ë¥¼ ë´…ë‹ˆë‹¤(S). ëŒ€í™”ì˜ í•€íŠ¸ê°€ ìì£¼ ì–´ê¸‹ë‚  ìˆ˜ ìˆì§€ë§Œ ì„œë¡œì—ê²Œ ìƒˆë¡œìš´ ì‹œê°ì„ ì„ ë¬¼í•´ìš”.";
                        synergy = "ì‹œì•¼ì˜ í™•ì¥"; conflict = "ëŒ€í™” ì£¼ì œì˜ ë¶ˆì¼ì¹˜"; score -= 5;
                    }
                }
                return { title, desc, synergy, conflict, score };
            }

            // [NEW] MBTI ì¡°í•©ë³„ ë§ì¶¤í˜• ì¡°ì–¸ ìƒì„±ê¸° (1.5ë°° ë³´ê°• í•µì‹¬)
            // [NEW] MBTI ì¡°í•©ë³„ ë§ì¶¤í˜• ì¡°ì–¸ ìƒì„±ê¸° (ì‹¤ì œ MBTI ë°˜ì˜ ë²„ì „)
            function getAdviceContent(typeA, typeB) {
                // ê¸°ë³¸ ë©˜íŠ¸ì—ë„ MBTI ë„£ê¸°
                let conv = `ì„œë¡œ ë‹¤ë¥¸ <b>${typeA}</b>ì™€ <b>${typeB}</b>ê°€ ë§Œë‚¬ë„¤ìš”. ë¹„ë‚œë³´ë‹¤ëŠ” 'ë‚˜' í™”ë²•ì„ ì‚¬ìš©í•˜ì„¸ìš”.`;
                let date = `<b>${typeA}</b>ì™€ <b>${typeB}</b>ê°€ ëª¨ë‘ ë§Œì¡±í•  ìˆ˜ ìˆë„ë¡, í™œë™ì ì¸ ë°ì´íŠ¸ì™€ ì •ì ì¸ ë°ì´íŠ¸ë¥¼ 5:5ë¡œ ì„ì–´ë³´ì„¸ìš”.`;
                let taboo = `<b>${typeB}</b>ë¥¼ <b>${typeA}</b>ì˜ ë°©ì‹ëŒ€ë¡œ ë°”ê¾¸ë ¤ í•˜ì§€ ë§ˆì„¸ìš”. ìˆëŠ” ê·¸ëŒ€ë¡œ ì‚¬ë‘í•´ì£¼ì„¸ìš”.`;

                // 1. T(ì‚¬ê³ ) vs F(ê°ì •) ëŒ€í™” ê°ˆë“±
                if (typeA.includes('T') && typeB.includes('F')) {
                    conv = `<b class="text-blue-600">${typeA}(ë‹¹ì‹ )</b>: í•´ê²°ì±…ë¶€í„° ì£¼ì§€ ë§ê³  ê³µê°ë¶€í„° í•´ì£¼ì„¸ìš”.<br><b class="text-pink-500">${typeB}(ìƒëŒ€)</b>: ìƒëŒ€ì˜ ì§ì„¤ì ì¸ ë§ì„ ë¹„ë‚œìœ¼ë¡œ ë“£ì§€ ë§ˆì„¸ìš”.`;
                    taboo = `<b>${typeA}</b>ëŠ” "ê·¸ë˜ì„œ ê²°ë¡ ì´ ë­ì•¼?" ê¸ˆì§€,<br><b>${typeB}</b>ëŠ” "ë‚˜ ì•ˆ ì‚¬ë‘í•´?" ê¸ˆì§€.`;
                } else if (typeA.includes('F') && typeB.includes('T')) {
                    conv = `<b class="text-pink-500">${typeA}(ë‹¹ì‹ )</b>: ì„œìš´í•¨ì„ ë…¼ë¦¬ì ìœ¼ë¡œ ì„¤ëª…í•˜ëŠ” ì—°ìŠµì´ í•„ìš”í•´ìš”.<br><b class="text-blue-600">${typeB}(ìƒëŒ€)</b>: ì˜í˜¼ ì—†ëŠ” ë¦¬ì•¡ì…˜ì´ë¼ë„ ë…¸ë ¥í•˜ê³  ìˆìŒì„ ì•Œì•„ì£¼ì„¸ìš”.`;
                    taboo = `<b>${typeA}</b>ëŠ” ì§•ì§•ê±°ë¦¼ ì£¼ì˜,<br><b>${typeB}</b>ëŠ” "ê·¸ê²Œ ì™œ ê¸°ë¶„ ë‚˜ë¹ ?" ê¸ˆì§€.`;
                }

                // 2. J(ê³„íš) vs P(ì¸ì‹) ë°ì´íŠ¸ ê°ˆë“±
                if (typeA.includes('J') && typeB.includes('P')) {
                    date = `ê³„íšì ì¸ <b>${typeA}</b>ê°€ í° í‹€ì„ ì§œê³ , ìœ ì—°í•œ <b>${typeB}</b>ê°€ ê·¸ ì•ˆì—ì„œ ë§›ì§‘ì„ ê³ ë¥´ëŠ” 'ë°˜ë°˜ ë°ì´íŠ¸'ë¥¼ ì¶”ì²œí•´ìš”.`;
                    taboo = `<b>${typeA}</b>ëŠ” ì‹œê°„ ë‹¥ë‹¬ ê¸ˆì§€, <b>${typeB}</b>ëŠ” ì•½ì† ì‹œê°„ ëŠ¦ê¸° ê¸ˆì§€.`;
                } else if (typeA.includes('P') && typeB.includes('J')) {
                    date = `<b>${typeB}</b>ì¸ ì—°ì¸ì„ ìœ„í•´ ìµœì†Œí•œì˜ ì˜ˆì•½ì€ í•„ìˆ˜! <b>${typeA}</b>ì¸ ë‹¹ì‹ ì˜ ì¦‰í¥ì„±ì€ 'ê¹œì§ ì„ ë¬¼'í•  ë•Œë§Œ ë°œíœ˜í•˜ì„¸ìš”.`;
                    taboo = `<b>${typeB}</b>ì˜ ê³„íš ë³€ê²½ì— í†  ë‹¬ì§€ ë§ê¸°, <b>${typeA}</b>ì˜ ë¬´ê³„íš ë¬´ì‹œí•˜ì§€ ë§ê¸°.`;
                }

                // 3. E(ì™¸í–¥) vs I(ë‚´í–¥) ì—ë„ˆì§€ ê°ˆë“± (ìš”ì²­í•˜ì‹  ë¶€ë¶„!)
                if (typeA.includes('E') && typeB.includes('I')) {
                    date = `ë°–ì—ì„œ ì—ë„ˆì§€ë¥¼ ì–»ëŠ” <b>${typeA}</b>ì™€ ë‹¬ë¦¬, <b>${typeB}</b>ëŠ” ì§‘ì—ì„œ ì‰¬ì–´ì•¼ ì¶©ì „ì´ ë©ë‹ˆë‹¤. ì•¼ì™¸ ë°ì´íŠ¸ í›„ì—ëŠ” <b>${typeB}</b>ì—ê²Œ í˜¼ìë§Œì˜ ì‹œê°„ì„ ê¼­ ì„ ë¬¼í•˜ì„¸ìš”.`;
                } else if (typeA.includes('I') && typeB.includes('E')) {
                    date = `ì—ë„ˆì§€ê°€ ë„˜ì¹˜ëŠ” <b>${typeB}</b>ì¸ ì—°ì¸ì„ ìœ„í•´ ê°€ë”ì€ ì‹œëŒë²…ì í•œ ëª¨ì„ì— ê°™ì´ ê°€ì£¼ì„¸ìš”. <b>${typeB}</b>ëŠ” ë‹¹ì‹ ê³¼ í•¨ê»˜ ë°–ì—ì„œ ì¶”ì–µì„ ìŒ“ê³  ì‹¶ì–´ í•©ë‹ˆë‹¤.`;
                }

                return { conv, date, taboo };
            }
            const dataList = document.getElementById('mbti-list');
            validMbtiList.forEach(t => { let opt = document.createElement('option'); opt.value = t; dataList.appendChild(opt); });

            function getThoughts(me, you) { return `"ë„ˆëŠ” ì°¸ ì‹ ê¸°í•œ ì‚¬ëŒì´ì•¼. ê·¸ë˜ì„œ ë” ì•Œê³  ì‹¶ì–´."`; }

            function validateAndAnalyze() {
                const inputA = document.getElementById('mbti-a');
                const inputB = document.getElementById('mbti-b');
                const valA = inputA.value.toUpperCase().trim();
                const valB = inputB.value.toUpperCase().trim();
                if (!validMbtiList.includes(valA)) { alert("ë‚˜ì˜ MBTIë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”!"); inputA.focus(); return; }
                if (!validMbtiList.includes(valB)) { alert("ì—°ì¸ì˜ MBTIë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”!"); inputB.focus(); return; }
                
                // [ìˆ˜ì •] ë°”ë¡œ ë¶„ì„ ì‹œì‘ (ì¿ íŒ¡ ë¡œì§ ì œê±°)
                analyzeRelationship(valA, valB);
            }

            function analyzeRelationship(mbtiA, mbtiB) {
                const getTrait = (t) => (mbtiTraits[t] ? mbtiTraits[t][Math.floor(Math.random() * mbtiTraits[t].length)] : defaultTraits[t]);
                let traitA = getTrait(mbtiA); let traitB = getTrait(mbtiB);
                let pairKey = [mbtiA, mbtiB].sort().join("-");
                let chemistry = generateDynamicChemistry(mbtiA, mbtiB); // ê¸°ë³¸ ë¡œì§ ì‚¬ìš©

                // ë§ì¶¤í˜• ì¡°ì–¸ ê°€ì ¸ì˜¤ê¸°
                const advice = getAdviceContent(mbtiA, mbtiB);

                const resultHTML = `
                    <div class="max-w-4xl mx-auto space-y-12">
                        <div class="chemistry-card rounded-3xl p-8 md:p-10 text-center shadow-xl relative overflow-hidden">
                             <div class="absolute top-0 left-0 w-full h-3 bg-gradient-to-r from-pink-400 to-orange-400"></div>
                             <div class="inline-block bg-slate-100 text-slate-500 font-bold px-4 py-1 rounded-full text-xs mb-6 tracking-widest">RELATIONSHIP TYPE</div>
                            <h2 class="text-3xl md:text-4xl font-extrabold text-slate-900 mb-6 leading-tight">${chemistry.title}</h2>
                            <p class="text-slate-600 leading-relaxed break-keep text-lg md:text-xl mb-8 px-4">${chemistry.desc}</p>
                            <div class="mt-8">
                                <span class="text-slate-400 text-sm font-bold mr-2">ê¶í•© ì ìˆ˜</span>
                                <div class="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-orange-400 inline-block align-middle">${chemistry.score}</div>
                                <span class="text-2xl text-slate-300 font-light">/ 100</span>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10">
                            <div class="bg-white p-8 rounded-[2rem] border border-blue-100 shadow-lg">
                                <div class="flex items-center gap-3 mb-4">
                                    <span class="bg-blue-100 text-blue-500 w-10 h-10 flex items-center justify-center rounded-full text-xl"><i class="fas fa-user"></i></span>
                                    <div><h3 class="font-black text-2xl text-slate-800">${mbtiA}</h3><p class="text-blue-400 font-bold text-xs">ë‚˜ì˜ í”„ë¡œí•„</p></div>
                                </div>
                                <p class="text-blue-500 font-bold text-lg mb-2">${traitA.tag}</p>
                                <p class="text-slate-600 text-sm leading-relaxed mb-4">${traitA.desc}</p>
                            </div>
                            <div class="bg-white p-8 rounded-[2rem] border border-pink-100 shadow-lg">
                                <div class="flex items-center justify-end gap-3 mb-4">
                                    <div class="text-right"><h3 class="font-black text-2xl text-slate-800">${mbtiB}</h3><p class="text-pink-400 font-bold text-xs">ì—°ì¸ì˜ í”„ë¡œí•„</p></div>
                                    <span class="bg-pink-100 text-pink-500 w-10 h-10 flex items-center justify-center rounded-full text-xl"><i class="fas fa-heart"></i></span>
                                </div>
                                <p class="text-pink-500 font-bold text-lg mb-2 text-right">${traitB.tag}</p>
                                <p class="text-slate-600 text-sm leading-relaxed mb-4 text-right">${traitB.desc}</p>
                            </div>
                        </div>

                        <div class="mt-12">
                            <div id="unlocked-content" class="bg-white border-2 border-slate-900 rounded-3xl p-8 shadow-2xl relative fade-in">
                                <div class="absolute -top-5 left-1/2 -translate-x-1/2 bg-slate-900 text-yellow-400 px-6 py-2 rounded-full font-bold text-sm shadow-lg"><i class="fas fa-crown mr-2"></i>SPECIAL GUIDE</div>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                                    <div class="bg-blue-50 p-6 rounded-2xl text-center">
                                        <h4 class="font-bold text-slate-800 mb-3">ğŸ’¬ ëŒ€í™”ì˜ ê¸°ìˆ </h4>
                                        <p class="text-sm text-slate-600 break-keep leading-relaxed">${advice.conv}</p>
                                    </div>
                                    <div class="bg-pink-50 p-6 rounded-2xl text-center">
                                        <h4 class="font-bold text-slate-800 mb-3">ğŸŸï¸ ì¶”ì²œ ë°ì´íŠ¸</h4>
                                        <p class="text-sm text-slate-600 break-keep leading-relaxed">${advice.date}</p>
                                    </div>
                                    <div class="bg-yellow-50 p-6 rounded-2xl text-center">
                                        <h4 class="font-bold text-slate-800 mb-3">âš ï¸ ì ˆëŒ€ ê¸ˆê¸°ì‚¬í•­</h4>
                                        <p class="text-sm text-slate-600 break-keep font-bold leading-relaxed">${advice.taboo}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-12 flex justify-center w-full">
                            <div id="coupang-banner-frame" style="width: 100%; max-width: 680px; height: 160px; overflow: hidden;"></div>
                        </div>

                    </div>
                `;

                document.getElementById('result-content').innerHTML = resultHTML;
                document.getElementById('input-page').classList.add('hidden');
                document.getElementById('result-page').classList.remove('hidden');
                window.scrollTo(0, 0);

                // ì¿ íŒ¡ ë°°ë„ˆ ì£¼ì…
                setTimeout(() => {
                    const bannerFrame = document.getElementById('coupang-banner-frame');
                    if (bannerFrame) {
                        const iframe = document.createElement('iframe');
                        iframe.style.width = '100%'; iframe.style.height = '100%'; iframe.style.border = 'none'; iframe.scrolling = 'no';
                        bannerFrame.appendChild(iframe);
                        const doc = iframe.contentWindow.document;
                        doc.open();
                        doc.write(`
                            <body style="margin:0; padding:0; display:flex; justify-content:center; align-items:center; overflow:hidden;">
                                <script src="https://ads-partners.coupang.com/g.js"><\/script>
                                <script> new PartnersCoupang.G({"id":949693,"template":"carousel","trackingCode":"AF3238435","width":"680","height":"160","tsource":""}); <\/script>
                            </body>
                        `);
                        doc.close();
                    }
                }, 100);
            }

            function resetPage() {
                document.getElementById('input-page').classList.remove('hidden');
                document.getElementById('result-page').classList.add('hidden');
                document.getElementById('mbti-a').value = '';
                document.getElementById('mbti-b').value = '';
            }

            window.updateFavicon = function(mbtiInput) {
                const mbti = mbtiInput.toUpperCase().trim();
                let topText = "MB", bottomText = "TI";
                if(mbti.length===4){ topText=mbti.substring(0,2); bottomText=mbti.substring(2,4); }
                const svg=`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path fill='#ff6b6b' d='M50,88.9C25.5,65.3,5,45.5,5,28.6c0-14.9,12.1-26.6,27-26.6c8.7,0,16.6,4.3,21.5,10.9 c3.8-5.3,10.1-9.5,18.3-10.9C86.5,0.3,98,11.7,98,26.6c0,17-21.6,37.7-48,62.3H50z'/><style>.txt{fill:white;font-family:sans-serif;font-weight:900;text-anchor:middle}</style><text class='txt' x='50%' y='38' font-size='30'>${topText}</text><text class='txt' x='50%' y='68' font-size='30'>${bottomText}</text></svg>`;
                document.getElementById('dynamic-favicon').href = "data:image/svg+xml," + encodeURIComponent(svg);
            }
            updateFavicon("");

            document.getElementById('analyze-btn').addEventListener('click', validateAndAnalyze);
            document.getElementById('back-btn').addEventListener('click', resetPage);
        });
    </script>
</body>
</html>
