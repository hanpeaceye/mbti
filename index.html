<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—°ì¸ê³¼ ë‚˜ì˜ MBTI ê¶í•© & ì•ˆ ì‹¸ìš°ëŠ” ê¿€íŒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-33VJ9T8RW5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-33VJ9T8RW5');
    </script>

    <meta property="og:type" content="website">
    <meta property="og:title" content="ì—°ì¸ê³¼ ë‚˜ì˜ MBTI ê¶í•© & ì•ˆ ì‹¸ìš°ëŠ” ê¿€íŒ ğŸ’–">
    <meta property="og:description" content="ìš°ë¦¬ ì»¤í”Œì€ ì™œ ì‹¸ìš¸ê¹Œ? ì„œë¡œì˜ ì†ë§ˆìŒë¶€í„° 200% ë¦¬ì–¼ ì—°ì•  ì²˜ë°©ì „ê¹Œì§€! 16ê°€ì§€ ìœ í˜• ì™„ë²½ ë¶„ì„ ë³´ê³ ì„œ">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/2074/2074844.png">
    <meta property="og:url" content="https://aimbti.xyz">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;800&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #fff0f5; }
        
        .fade-in { animation: fadeIn 0.8s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .chemistry-card { background: linear-gradient(145deg, #ffffff, #fff5f7); border: 1px solid #ffe4e6; }
        .vs-badge { background: linear-gradient(45deg, #ff6b6b, #ff8e53); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* ë§í’ì„  ë””í…Œì¼ */
        .bubble-left::before { content: ''; position: absolute; left: -12px; top: 24px; border-width: 12px 12px 12px 0; border-color: transparent white transparent transparent; filter: drop-shadow(-2px 0 2px rgba(0,0,0,0.05)); }
        .bubble-right::before { content: ''; position: absolute; right: -12px; top: 24px; border-width: 12px 0 12px 12px; border-color: transparent white transparent transparent; filter: drop-shadow(2px 0 2px rgba(0,0,0,0.05)); }
        
        .coupang-btn-gradient { background: linear-gradient(to right, #e11f1f, #ff9000); }
        
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; border-color: #ef4444 !important; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

        /* ê·€ì—¬ìš´ íŠ€ì–´ì˜¤ë¥´ëŠ” ì• ë‹ˆë©”ì´ì…˜ (ì¶”ì²œí…œ ë²„íŠ¼ìš©) */
        .bounce-custom { animation: bounce-custom 2s infinite; }
        @keyframes bounce-custom {
            0%, 100% { transform: translateY(-5%); animation-timing-function: cubic-bezier(0.8,0,1,1); }
            50% { transform: translateY(0); animation-timing-function: cubic-bezier(0,0,0.2,1); }
        }

        /* ì‹œí¬ë¦¿ ê°€ì´ë“œ ì „ìš© ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes float-lock {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); text-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        }
        .animate-float-lock {
            animation: float-lock 3s ease-in-out infinite;
            display: inline-block;
        }

        @keyframes pulse-glow-btn {
            0% { box-shadow: 0 4px 15px rgba(225, 31, 31, 0.4); transform: scale(1); }
            50% { box-shadow: 0 0 30px rgba(255, 80, 80, 0.8), 0 0 15px rgba(255, 200, 0, 0.6); transform: scale(1.03); }
            100% { box-shadow: 0 4px 15px rgba(225, 31, 31, 0.4); transform: scale(1); }
        }
        .animate-pulse-glow {
            animation: pulse-glow-btn 1.5s infinite ease-in-out;
        }
    </style>
</head>
<body class="text-slate-800 min-h-screen">

    <div class="w-full max-w-5xl mx-auto px-4 py-10">

        <div id="input-page" class="flex flex-col justify-center min-h-[85vh] fade-in">
            <div class="text-center mb-12">
                <span class="inline-block bg-white border border-pink-200 text-pink-500 text-xs font-bold px-4 py-1.5 rounded-full mb-4 shadow-sm tracking-wide">Couple Compatibility Test</span>
                <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 mb-4 leading-tight">
                    ì—°ì¸ê³¼ ë‚˜ì˜ MBTI ê¶í•©,<br class="md:hidden">ê·¸ë¦¬ê³  <span class="text-pink-500">ì•ˆ ì‹¸ìš°ëŠ” ê¿€íŒ!</span> ğŸ’–
                </h1>
                <p class="text-slate-500 text-base md:text-lg">ì„œë¡œ ë‹¤ë¥¸ ìš°ë¦¬, ì–´ë–»ê²Œ ë§ì¶°ê°€ì•¼ í• ê¹Œìš”? <br class="md:hidden">200% ë¦¬ì–¼ ì—°ì•  ì²˜ë°©ì „</p>
            </div>

            <div class="bg-white rounded-[2rem] p-8 md:p-12 shadow-2xl shadow-pink-100 max-w-3xl mx-auto w-full border border-white">
                <div class="flex flex-col gap-10">
                    <div class="flex flex-col md:flex-row items-center justify-between gap-8">
                        <div class="w-full group">
                            <label class="block text-sm font-bold text-slate-500 mb-3 ml-2 group-hover:text-blue-500 transition-colors">ë‚˜ì˜ MBTI</label>
                            <div class="relative">
                                <input id="mbti-a" list="mbti-list" oninput="this.value = this.value.toUpperCase()" onkeyup="updateFavicon(this.value)" class="w-full bg-slate-50 border-2 border-slate-100 rounded-2xl p-5 text-center text-3xl font-black uppercase text-slate-800 focus:border-blue-400 focus:ring-4 focus:ring-blue-100 outline-none transition placeholder-slate-300 tracking-widest" placeholder="ENTP" maxlength="4">
                                <div class="absolute left-5 top-1/2 -translate-y-1/2 w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-500"><i class="fas fa-user"></i></div>
                            </div>
                        </div>
                        <span class="text-5xl font-black italic vs-badge transform md:rotate-12">VS</span>
                        <div class="w-full group">
                            <label class="block text-sm font-bold text-slate-500 mb-3 ml-2 group-hover:text-pink-500 transition-colors">ì—°ì¸ì˜ MBTI</label>
                            <div class="relative">
                                <input id="mbti-b" list="mbti-list" oninput="this.value = this.value.toUpperCase()" class="w-full bg-slate-50 border-2 border-slate-100 rounded-2xl p-5 text-center text-3xl font-black uppercase text-slate-800 focus:border-pink-400 focus:ring-4 focus:ring-pink-100 outline-none transition placeholder-slate-300 tracking-widest" placeholder="ISFJ" maxlength="4">
                                <div class="absolute left-5 top-1/2 -translate-y-1/2 w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center text-pink-500"><i class="fas fa-heart"></i></div>
                            </div>
                        </div>
                    </div>
                    
                    <button id="analyze-btn" class="w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-6 rounded-2xl shadow-xl hover:shadow-2xl text-lg md:text-xl active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-3 group">
                        <span>ê²°ê³¼ ë³´ê¸°</span> <i class="fas fa-rocket group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="result-page" class="hidden fade-in pb-20">
            <div class="max-w-4xl mx-auto mb-8 flex items-center justify-between">
                <button id="back-btn" class="text-slate-400 hover:text-slate-800 font-bold flex items-center gap-2 transition-colors px-4 py-2 rounded-lg hover:bg-slate-100">
                    <i class="fas fa-arrow-left"></i> ì²˜ìŒìœ¼ë¡œ
                </button>
                <span class="text-xs font-bold text-pink-400 bg-pink-50 px-3 py-1 rounded-full">LOVE REPORT</span>
            </div>
            <div id="result-content"></div>
        </div>

    </div>

    <datalist id="mbti-list"></datalist>

    <link id="dynamic-favicon" rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§¡</text></svg>">

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const validMbtiList = ["ISTJ", "ISFJ", "INFJ", "INTJ", "ISTP", "ISFP", "INFP", "INTP", "ESTP", "ESFP", "ENFP", "ENTP", "ESTJ", "ESFJ", "ENFJ", "ENTJ"];

            // [ê°œë³„ ë°ì´í„°]
            const mbtiTraits = {
                "ENTP": [
                    { tag: "ğŸ¤ ì•„ì´ë””ì–´ ë±…í¬", desc: "ì¥ë‚œê¸° ë„˜ì¹˜ì§€ë§Œ ë¨¸ë¦¿ì†ì€ ì‚¬ì—… êµ¬ìƒìœ¼ë¡œ ê°€ë“ ì°¨ ìˆì£ . ì§€ë£¨í•œ ê±´ ë”± ì§ˆìƒ‰ì¸ ë§¤ë ¥ìŸì´!", strength: "ì°½ì˜ë ¥ê³¼ ìœ ë¨¸ê°ê°", weakness: "ë’·ì‹¬ ë¶€ì¡±" },
                    { tag: "ğŸ¤¡ ì²œì¬ì ì¸ ì•…ë™", desc: "ë‚¨ë“¤ì´ 'ì˜ˆ' í•  ë•Œ 'ì•„ë‹ˆì˜¤'ë¼ê³  ë§í•˜ëŠ” ì§œë¦¿í•¨ì„ ì¦ê²¨ìš”. ì—‰ëš±í•˜ì§€ë§Œ ë¯¸ì›Œí•  ìˆ˜ ì—†ì£ .", strength: "í˜ì‹ ì ì¸ ë¬¸ì œí•´ê²°", weakness: "ëˆˆì¹˜ ë¶€ì¡±" }
                ],
                "ISTJ": [
                    { tag: "ğŸ“‰ ì¸ê°„ ì—‘ì…€ íŒŒì¼", desc: "ì•½ì† ì‹œê°„ 1ë¶„ë„ ì–´ê¸°ì§€ ì•Šì•„ìš”. ëª¨ë“  ë°ì´íŠ¸ ì½”ìŠ¤ë¥¼ ê³„íší•´ì˜¤ëŠ” ë“ ë“ í•œ ì• ì¸ì…ë‹ˆë‹¤.", strength: "ë¬´í•œ ì±…ì„ê°", weakness: "ìœµí†µì„± ë¶€ì¡±" },
                    { tag: "ğŸ›¡ï¸ ë“¬ì§í•œ ì›ì¹™ì£¼ì˜ì", desc: "ë¹ˆë§ì€ ëª» í•˜ì§€ë§Œ, í•œë²ˆ ë±‰ì€ ë§ì€ ë¬´ì¡°ê±´ ì§€ì¼œìš”. ê²°í˜¼ ìƒëŒ€ë¡œëŠ” 1ë“±ì´ì£ .", strength: "í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ì•ˆì •ê°", weakness: "ìƒˆë¡œìš´ ì‹œë„ ê±°ë¶€" }
                ],
                "ISFJ": [
                    { tag: "ğŸŒ» ë‹¤ì •í•œ ìˆ˜í˜¸ ì²œì‚¬", desc: "ë‚˜ë³´ë‹¤ ì—°ì¸ì„ ë¨¼ì € ì±™ê²¨ìš”. ê²‰ìœ¼ë¡  ì›ƒì§€ë§Œ ì†ìœ¼ë¡œ ì°¸ëŠ” ê²Œ ë§ìœ¼ë‹ˆ ì˜ ì‚´í´ì¤˜ì•¼ í•´ìš”.", strength: "ì„¬ì„¸í•œ ë°°ë ¤ì‹¬", weakness: "ê±°ì ˆì„ ëª» í•¨" },
                    { tag: "ğŸ¡ ê°€ì •ì ì¸ í‰í™”ì£¼ì˜ì", desc: "ì†Œì†Œí•œ í–‰ë³µì„ ì¤‘ìš”ì‹œí•´ìš”. ë‚´ ì‚¬ëŒì—ê²ŒëŠ” ëª¨ë“  ê±¸ ë‹¤ í¼ì£¼ëŠ” í—Œì‹ ì ì¸ ì‚¬ë‘ê¾¼ì…ë‹ˆë‹¤.", strength: "í—Œì‹ ì ì¸ íƒœë„", weakness: "ë³€í™”ì— ëŒ€í•œ ë‘ë ¤ì›€" }
                ],
                "ENFP": [
                    { tag: "ğŸ‰ ì¸ê°„ ê³¨ë“  ë¦¬íŠ¸ë¦¬ë²„", desc: "ì‚¬ëŒì„ ë„ˆë¬´ ì¢‹ì•„í•˜ê³  ê¸ˆë°© ì‚¬ë‘ì— ë¹ ì ¸ìš”. ê°ì • í‘œí˜„ì´ ì†”ì§í•´ì„œ ì‚¬ë‘ìŠ¤ëŸ¬ì›Œìš”.", strength: "í•´í”¼ ë°”ì´ëŸ¬ìŠ¤", weakness: "ì‰½ê²Œ ìƒì²˜ë°›ìŒ" },
                    { tag: "âœ¨ ë°˜ì§ì´ëŠ” ì˜ê° ë¶€ì", desc: "í•˜ê³  ì‹¶ì€ ê²Œ 100ê°€ì§€! ì—´ì •ì ìœ¼ë¡œ ì‚¬ë‘í•˜ê³  í‘œí˜„í•˜ëŠ” ë¶ˆë„ì € ê°™ì€ ë§¤ë ¥ì´ ìˆì–´ìš”.", strength: "ì‚¬ëŒì„ ì´ë„ëŠ” í˜", weakness: "ë³€ë•ì´ ì‹¬í•¨" }
                ],
                 "ESFJ": [
                    { tag: "ğŸ° ì‚¬ë‘ë‘¥ì´ í•µì¸ì‹¸", desc: "ê¸°ë…ì¼, ì‚¬ì†Œí•œ ì´ë²¤íŠ¸ í•˜ë‚˜ë„ ë†“ì¹˜ì§€ ì•Šê³  ì±™ê²¨ì¤˜ìš”. ì‚¬ë‘ë°›ëŠ” ëŠë‚Œì„ íŒíŒ ì¤ë‹ˆë‹¤.", strength: "ìµœê³ ì˜ ê³µê° ëŠ¥ë ¥", weakness: "ë¹„íŒì— ìƒì²˜ë°›ìŒ" },
                    { tag: "ğŸ¤ ë‚´ì¡°/ì™¸ì¡°ì˜ ì™•", desc: "ë‚´ ì—°ì¸ì´ ì–´ë”” ê°€ì„œ ê¸°ì£½ëŠ” ê¼´ ëª» ë³´ì£ . ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œë„ ì˜í•˜ëŠ” ì„¼ìŠ¤ìŸì´ì…ë‹ˆë‹¤.", strength: "ì‚¬êµì„±ê³¼ ë°°ë ¤", weakness: "íƒ€ì¸ì˜ ì‹œì„  ì˜ì‹" }
                ],
                "INTJ": [
                    { tag: "â™Ÿï¸ ì¸¤ë°ë ˆ ì „ëµê°€", desc: "í‘œí˜„ì€ ì„œíˆ´ì§€ë§Œ, ë¨¸ë¦¿ì†ì—” ì´ë¯¸ ìš°ë¦¬ ë¯¸ë˜ ê³„íšê¹Œì§€ ë‹¤ ì„¸ì›Œë†¨ì–´ìš”. ì•Œë©´ ì•Œìˆ˜ë¡ ì§„êµ­!", strength: "ê¹Šì€ í†µì°°ë ¥", weakness: "ê°ì • í‘œí˜„ ì„œíˆ¼" },
                    { tag: "ğŸ¦‰ ì§€ì ì¸ ë‡Œì„¹ë‚¨ë…€", desc: "ë°°ìš¸ ì ì´ ë§ì€ ì‚¬ëŒì´ì—ìš”. ë…¼ë¦¬ì ìœ¼ë¡œ ëŒ€í™”í•˜ëŠ” ê±¸ ì¢‹ì•„í•˜ê³ , ìê¸° ì‚¬ëŒì—ê² ì¶©ì‹¤í•´ìš”.", strength: "ë¬¸ì œ í•´ê²° ëŠ¥ë ¥", weakness: "ì§€ë‚˜ì¹œ ì™„ë²½ì£¼ì˜" }
                ],
            };
            
            const defaultTraits = {
                "INFJ": { tag: "ğŸ”® ì† ê¹Šì€ ì˜ˆì–¸ê°€", desc: "ê²‰ì€ ë¶€ë“œëŸ½ì§€ë§Œ ì†ì€ ë‹¨ë‹¨í•´ìš”. ë§í•˜ì§€ ì•Šì•„ë„ ë‚´ ë§ˆìŒì„ ê¿°ëš«ì–´ ë³´ëŠ” ë“¯í•œ ì„¬ì„¸í•¨ì´ ìˆì£ .", strength: "í†µì°°ë ¥", weakness: "ì˜ˆë¯¼í•¨" },
                "INTP": { tag: "ğŸ§ª ê²Œìœ¼ë¥¸ ì²œì¬", desc: "ê´€ì‹¬ ìˆëŠ” ë¶„ì•¼ì—” ë¯¸ì¹œ ë“¯ì´ íŒŒê³ ë“¤ì§€ë§Œ, ì—°ì•  ë°€ë‹¹ì€ ê·€ì°®ì•„í•´ìš”. ì†”ì§ë‹´ë°±í•œ ë§¤ë ¥!", strength: "ë¶„ì„ë ¥", weakness: "ê³µê° ì„œíˆ¼" },
                "INFP": { tag: "ğŸ§š ê¿ˆê¾¸ëŠ” ë‚­ë§Œê°€", desc: "ìì‹ ë§Œì˜ ì„¸ê³„ê°€ í™•ê³ í•´ìš”. í˜„ì‹¤ ê°ê°ì€ ì¢€ ë–¨ì–´ì ¸ë„ ì˜ˆìˆ ì  ê°ìˆ˜ì„±ê³¼ ë‚­ë§Œì€ ìµœê³ ì…ë‹ˆë‹¤.", strength: "ìˆœìˆ˜í•¨", weakness: "ìœ ë¦¬ë©˜íƒˆ" },
                "ESTJ": { tag: "ğŸ‘‘ ë“ ë“ í•œ ë¦¬ë”", desc: "í˜¸ë¶ˆí˜¸ê°€ í™•ì‹¤í•˜ê³  ë¦¬ë“œí•˜ëŠ” ê±¸ ì¢‹ì•„í•´ìš”. ë‹µë‹µí•œ ìƒí™©ì„ ë”± ì •ë¦¬í•´ì£¼ëŠ” ì‚¬ì´ë‹¤ ê°™ì€ ì• ì¸!", strength: "ì¶”ì§„ë ¥", weakness: "ì§ì„¤ì  í™”ë²•" },
                "ENTJ": { tag: "ğŸ”¥ ì—´ì • ë¶ˆë„ì €", desc: "í•¨ê»˜ ì„±ì¥í•˜ëŠ” ì—°ì• ë¥¼ ì›í•´ìš”. ì¼ë„ ì‚¬ë‘ë„ ìµœê³ ë¡œ í•´ë‚´ê³  ì‹¶ì€ ì•¼ë§ ìˆëŠ” ë©‹ì§„ ì‚¬ëŒ.", strength: "ë¦¬ë”ì‹­", weakness: "ê³µê° ë¶€ì¡±" },
                "ENFJ": { tag: "ğŸ¤ ì •ì˜ë¡œìš´ ì–¸ë³€ê°€", desc: "ì—°ì¸ì˜ ì„±ì¥ì„ ë•ëŠ” ê±¸ ê¸°ì¨ìœ¼ë¡œ ì•Œì•„ìš”. ì˜¤ì§€ë–ì´ ë„“ì§€ë§Œ ê·¸ë§Œí¼ ì‚¬ë‘ë„ ë„˜ì¹©ë‹ˆë‹¤.", strength: "ì„¤ë“ë ¥", weakness: "ì§€ë‚˜ì¹œ í¬ìƒ" },
                "ISTP": { tag: "ğŸ”§ ì‹œí¬í•œ ë§ŒëŠ¥ë§¨", desc: "ê·€ì°®ì€ ê±¸ ì‹«ì–´í•˜ì§€ë§Œ í•„ìš”í•  ë• ëšë”± í•´ê²°í•´ì¤˜ìš”. ë¬´ëšëší•´ ë³´ì´ì§€ë§Œ ì€ê·¼íˆ ì±™ê²¨ì¤ë‹ˆë‹¤.", strength: "ì†ì¬ì£¼", weakness: "ë¬´ê´€ì‹¬" },
                "ISFP": { tag: "ğŸ¨ ì¹¨ëŒ€ ë°–ì€ ìœ„í—˜í•´", desc: "ì§‘ìˆœì´/ì§‘ëŒì´ì§€ë§Œ ë§‰ìƒ ë°ì´íŠ¸í•˜ë©´ ì˜ ë†€ì•„ìš”. ì‹¸ìš°ëŠ” ê±¸ ì‹«ì–´í•´ì„œ ì˜ ë§ì¶°ì¤ë‹ˆë‹¤.", strength: "ì˜ˆìˆ ì  ê°ê°", weakness: "ê²Œìœ¼ë¦„" },
                "ESTP": { tag: "âš¡ ìŠ¤ë¦´ ì¦ê¸°ëŠ” ìŠ¹ë¶€ì‚¬", desc: "ê³ ë¯¼í•  ì‹œê°„ì— ì €ì§ˆëŸ¬ìš”! ë‚´ê¸°ë¥¼ ì¢‹ì•„í•˜ê³  ë’¤ë ì—†ëŠ” ì¿¨í•œ ì„±ê²©ì˜ ì†Œìœ ì.", strength: "í–‰ë™ë ¥", weakness: "ì¶©ë™ì„±" },
                "ESFP": { tag: "ğŸ’ƒ í¥ ë¶€ì ì—°ì˜ˆì¸", desc: "ì¸ìƒì€ ì¦ê±°ì›Œì•¼ì£ ! ìš°ìš¸í•  í‹ˆì„ ì•ˆ ì£¼ëŠ” ë¶„ìœ„ê¸° ë©”ì´ì»¤. ì§„ì§€í•œ ê±´ ë”± ì§ˆìƒ‰.", strength: "ìŠ¤íƒ€ì„±", weakness: "ì§„ì§€í•¨ ë¶€ì¡±" }
            };

            const specialPairs = {
                "ENTP-ISFJ": { title: "ğŸª ì—°ê³¼ ì–¼ë ˆ: í™˜ìƒì˜ ì§ê¿", desc: "ì‚¬ê³ ë­‰ì¹˜ ENTPë¥¼ ì¡°ìš©íˆ ìˆ˜ìŠµí•´ì£¼ëŠ” ISFJ! ê²‰ë³´ê¸°ì—” ENTPê°€ ì´ê¸°ëŠ” ê²ƒ ê°™ì§€ë§Œ, ê²°ì •ì ì¸ ìˆœê°„ì—” ISFJì˜ ê³ ì§‘ì„ ëª» êº¾ì–´ìš”.", synergy: "ì•„ì´ë””ì–´ë¥¼ í˜„ì‹¤ë¡œ ë§Œë“¤ì–´ì¤Œ", conflict: "ë¬´ê³„íš vs ì² ì €í•œ ê³„íš", score: 98 },
                "ENTP-ISTJ": { title: "âš”ï¸ ì°½ê³¼ ë°©íŒ¨: ë…¼ë¦¬ ëŒ€ê²°", desc: "ìƒˆë¡œìš´ ê±¸ ì‹œë„í•˜ë ¤ëŠ” ENTPì™€ ê¸°ì¡´ ë°©ì‹ì„ ì§€í‚¤ë ¤ëŠ” ISTJ! ì„œë¡œì˜ ëŠ¥ë ¥ì„ ì¸ì •í•˜ë©´ ì—„ì²­ë‚œ ì‹œë„ˆì§€ê°€ ë‚˜ì§€ë§Œ, ìì¡´ì‹¬ ì‹¸ì›€ì€ ìœ„í—˜í•´ìš”.", synergy: "ê°ì • ë°°ì œí•œ íš¨ìœ¨ì  ë¬¸ì œí•´ê²°", conflict: "'ì™œ êµ³ì´ ë°”ê¿”?' vs 'ì™œ ì•ˆ í•´?'", score: 65 },
                "ENTP-ENTP": { title: "ğŸ¤¡ ê±°ìš¸ ì†ì˜ ì¥ë‚œê¾¸ëŸ¬ê¸°ë“¤", desc: "ë§Œë‚˜ë©´ ì‹œê°„ ê°€ëŠ” ì¤„ ëª¨ë¥´ê³  ë– ë“¤ì–´ìš”. í‹°í‚¤íƒ€ì¹´ëŠ” ìµœê³ ì§€ë§Œ, ë°ì´íŠ¸ ê³„íšë§Œ 100ê°œ ì„¸ìš°ê³  ì§‘ì—ì„œ ì˜ ìˆ˜ë„ ìˆì–´ìš”.", synergy: "ì§€ë£¨í•  í‹ˆ ì—†ëŠ” ì¬ë¯¸", conflict: "ì„œë¡œì˜ ë‹¨ì ì´ ë„ˆë¬´ ì˜ ë³´ì„", score: 80 },
                "INFP-ENFJ": { title: "ğŸ‘¸ ì™•ìë‹˜ê³¼ ê³µì£¼ë‹˜", desc: "ì„œë¡œê°€ ì„œë¡œë¥¼ ë™ê²½í•˜ê³  ì•„ê»´ì£¼ëŠ” ë‚­ë§Œì ì¸ ê´€ê³„ì˜ˆìš”. ENFJëŠ” INFPë¥¼ ì§€ì¼œì£¼ê³ , INFPëŠ” ENFJì—ê²Œ ì‰´ ê³³ì´ ë˜ì–´ì¤ë‹ˆë‹¤.", synergy: "ì •ì„œì  ì§€ì§€ì™€ ì„±ì¥", conflict: "í˜„ì‹¤ì ì¸ ë¬¸ì œ íšŒí”¼", score: 95 }
            };

            function generateDynamicChemistry(typeA, typeB) {
                let score = 70;
                let title = "ì•Œ ìˆ˜ ì—†ëŠ” ì´ëŒë¦¼";
                let desc = "";
                let synergy = "";
                let conflict = "";
                let diffCount = 0;
                for(let i=0; i<4; i++) if(typeA[i] !== typeB[i]) diffCount++;

                if (diffCount === 0) { 
                    title = "ê±°ìš¸ì„ ë³´ëŠ” ì‚¬ì´";
                    desc = "ë‚˜ë‘ ë˜‘ê°™ì€ ì‚¬ëŒì„ ë§Œë‚¬ë„¤ìš”. ë§ì´ ì˜ í†µí•˜ê³  í¸ì•ˆí•˜ì§€ë§Œ, ë‚´ê°€ ì‹«ì–´í•˜ëŠ” ë‚˜ì˜ ë‹¨ì ì´ ìƒëŒ€ì—ê²Œì„œ ë³´ì¼ ë•Œ ë¬˜í•˜ê²Œ ì§œì¦ ë‚  ìˆ˜ ìˆì–´ìš”.";
                    synergy = "ì™„ë²½í•œ ì´í•´ì™€ ê³µê°"; conflict = "ë˜‘ê°™ì€ ë¬¸ì œë¡œ ë˜‘ê°™ì´ ì£¼ì €í•¨"; score = 80;
                } else if (diffCount === 4) { 
                    title = "ë‹¤ë¥¸ í–‰ì„±ì—ì„œ ì˜¨ ì»¤í”Œ";
                    desc = "ë¨¸ë¦¬ë¶€í„° ë°œëê¹Œì§€ ë‹¬ë¼ìš”! ì²˜ìŒì—” ë„ì €íˆ ì´í•´ê°€ ì•ˆ ê°€ì§€ë§Œ, ë‚´ê°€ ê°€ì§€ì§€ ëª»í•œ ëŠ¥ë ¥ì„ ê°€ì§„ ìƒëŒ€ì—ê²Œ ê°•ë ¬í•˜ê²Œ ëŒë¦¬ê²Œ ë©ë‹ˆë‹¤.";
                    synergy = "ì„œë¡œì˜ ì•½ì ì„ ì™„ë²½íˆ ë³´ì™„"; conflict = "ê°€ì¹˜ê´€ê³¼ ìƒí™œ íŒ¨í„´ì˜ ì¶©ëŒ"; score = 95;
                } else {
                    if (typeA[1] !== typeB[1]) {
                        title = "í˜„ì‹¤ê³¼ ì´ìƒì˜ ì¤„ë‹¤ë¦¬ê¸°";
                        desc = "í•œ ëª…ì€ ìˆ²ì„ ë³´ê³ (N), í•œ ëª…ì€ ë‚˜ë¬´ë¥¼ ë´…ë‹ˆë‹¤(S). ëŒ€í™”ì˜ í•€íŠ¸ê°€ ìì£¼ ì–´ê¸‹ë‚  ìˆ˜ ìˆì§€ë§Œ ì„œë¡œì—ê²Œ ìƒˆë¡œìš´ ì‹œê°ì„ ì„ ë¬¼í•´ìš”.";
                        synergy = "ì‹œì•¼ì˜ í™•ì¥"; conflict = "ëŒ€í™” ì£¼ì œì˜ ë¶ˆì¼ì¹˜"; score -= 5;
                    }
                    if (typeA[2] !== typeB[2]) {
                        desc += " ì‹¸ìš¸ ë•Œ í•œ ëª…ì€ ë…¼ë¦¬ë¥¼ ë”°ì§€ê³ , í•œ ëª…ì€ ì„œìš´í•¨ì„ í† ë¡œí•´ìš”. ì„œë¡œ í†µì—­ê°€ê°€ í•„ìš”í•©ë‹ˆë‹¤.";
                        conflict = "ê°ì • ìƒí•¨ vs ë‹µë‹µí•¨";
                    }
                }
                return { title, desc, synergy, conflict, score };
            }

            const dataList = document.getElementById('mbti-list');
            validMbtiList.forEach(t => {
                let opt = document.createElement('option');
                opt.value = t;
                dataList.appendChild(opt);
            });

            function getThoughts(me, you) {
                if (me === you) return `"ë„ˆë¥¼ ë³´ë©´ ë‚˜ë¥¼ ë³´ëŠ” ê²ƒ ê°™ì•„. ê·¸ë˜ì„œ ì¢‹ê¸°ë„ í•˜ê³ , ê°€ë”ì€ ì¢€ ì§ í•˜ê¸°ë„ í•´."`;
                if (me.includes('N') && you.includes('S')) return `"ê°€ë”ì€ ë„ˆë¬´ í˜„ì‹¤ì ì¸ ì–˜ê¸°ë§Œ í•´ì„œ ë‹µë‹µí•´. ê·¼ë° ë‚´ê°€ ë†“ì¹˜ëŠ” ê±¸ ì±™ê²¨ì¤„ ë• ì§„ì§œ ê³ ë§ˆì›Œ."`;
                if (me.includes('S') && you.includes('N')) return `"ëœ¬êµ¬ë¦„ ì¡ëŠ” ì†Œë¦¬ ì¢€ ê·¸ë§Œí–ˆìœ¼ë©´ ì¢‹ê² ì–´. ê·¸ë˜ë„ ë„ˆë‘ ìˆìœ¼ë©´ ì„¸ìƒì´ ì¢€ ì‹ ê¸°í•´ ë³´ì´ê¸´ í•´."`;
                if (me.includes('T') && you.includes('F')) return `"ë„ˆë¬´ ê°ì •ì ì´ì•¼. í•´ê²°ì±…ì„ ì£¼ë©´ ì„œìš´í•´í•˜ë‹ˆê¹Œ ë§ì„ ëª» í•˜ê² ì–´. ê·¼ë° ì°¸ ë”°ëœ»í•œ ì‚¬ëŒì´ê¸´ í•´."`;
                if (me.includes('F') && you.includes('T')) return `"ë§ì„ ë„ˆë¬´ ì°¨ê°‘ê²Œ í•´. ë‚´ ë§˜ë„ ëª°ë¼ì£¼ê³ ... ê·¸ë˜ë„ ë¯¿ìŒì§ìŠ¤ëŸ¬ìš´ ê±´ ì‚¬ì‹¤ì´ì•¼."`;
                return `"ë„ˆë‘ì€ ì •ë§ ë‹¬ë¼ì„œ ì‹ ê¸°í•´. ë„ëŒ€ì²´ ë¬´ìŠ¨ ìƒê°ìœ¼ë¡œ ì‚¬ëŠ” ê±¸ê¹Œ? ê·¸ë˜ì„œ ë” ì•Œê³  ì‹¶ì–´."`;
            }

            // [ìˆ˜ì •] ì²« ë²ˆì§¸ ë²„íŠ¼ ë¡œì§ (ì¿ íŒ¡ ì—°ë™ ì œê±°)
            function validateAndAnalyze() {
                const inputA = document.getElementById('mbti-a');
                const inputB = document.getElementById('mbti-b');
                const valA = inputA.value.toUpperCase().trim();
                const valB = inputB.value.toUpperCase().trim();

                let isValid = true;
                let errorMsg = "";

                if (!validMbtiList.includes(valA)) {
                    inputA.classList.add('shake');
                    setTimeout(() => inputA.classList.remove('shake'), 400);
                    isValid = false;
                    errorMsg = "ë‚˜ì˜ MBTIë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”!";
                    inputA.focus();
                } else if (!validMbtiList.includes(valB)) {
                    inputB.classList.add('shake');
                    setTimeout(() => inputB.classList.remove('shake'), 400);
                    isValid = false;
                    errorMsg = "ì—°ì¸ì˜ MBTIë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”!";
                    inputB.focus();
                }

                if (!isValid) { alert(errorMsg); return; }

                // ë°”ë¡œ ë¶„ì„ ì‹œì‘ (ì¿ íŒ¡ ì—´ê¸° ì½”ë“œ ì‚­ì œë¨)
                analyzeRelationship(valA, valB);
            }

            function analyzeRelationship(mbtiA, mbtiB) {
                const getTrait = (type) => {
                    if (mbtiTraits[type]) {
                        return mbtiTraits[type][Math.floor(Math.random() * mbtiTraits[type].length)];
                    }
                    return defaultTraits[type];
                };

                let traitA = getTrait(mbtiA);
                let traitB = getTrait(mbtiB);
                
                if (mbtiA === mbtiB && mbtiTraits[mbtiA]) {
                    traitA = mbtiTraits[mbtiA][0];
                    traitB = mbtiTraits[mbtiA][1];
                }

                const pairKey = [mbtiA, mbtiB].sort().join("-");
                let chemistry = specialPairs[pairKey];
                
                if (!chemistry) {
                    chemistry = generateDynamicChemistry(mbtiA, mbtiB);
                }

                const viewAtoB = getThoughts(mbtiA, mbtiB);
                const viewBtoA = getThoughts(mbtiB, mbtiA);

                const resultHTML = `
                    <div class="max-w-4xl mx-auto space-y-12">
                        <div class="chemistry-card rounded-3xl p-8 md:p-10 text-center shadow-xl relative overflow-hidden">
                             <div class="absolute top-0 left-0 w-full h-3 bg-gradient-to-r from-pink-400 to-orange-400"></div>
                             <div class="inline-block bg-slate-100 text-slate-500 font-bold px-4 py-1 rounded-full text-xs mb-6 tracking-widest">RELATIONSHIP TYPE</div>
                            <h2 class="text-3xl md:text-4xl font-extrabold text-slate-900 mb-6 leading-tight">${chemistry.title}</h2>
                            <p class="text-slate-600 leading-relaxed break-keep text-lg md:text-xl mb-8 px-4">${chemistry.desc}</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left bg-white rounded-2xl p-6 border border-slate-100 shadow-inner">
                                <div class="p-2"><p class="font-bold text-blue-500 mb-1">ğŸ”¥ ì‹œë„ˆì§€ í¬ì¸íŠ¸</p><p class="text-sm text-slate-600">${chemistry.synergy}</p></div>
                                <div class="p-2 border-t md:border-t-0 md:border-l border-slate-100"><p class="font-bold text-red-400 mb-1">ğŸ’£ ê°ˆë“± ì£¼ì˜</p><p class="text-sm text-slate-600">${chemistry.conflict}</p></div>
                            </div>
                            <div class="mt-8">
                                <span class="text-slate-400 text-sm font-bold mr-2">ê¶í•© ì ìˆ˜</span>
                                <div class="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-orange-400 inline-block align-middle">${chemistry.score}</div>
                                <span class="text-2xl text-slate-300 font-light">/ 100</span>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10">
                            <div class="flex flex-col h-full">
                                <div class="bg-white p-8 rounded-[2rem] border border-blue-100 shadow-lg relative flex-1">
                                    <div class="flex items-center gap-3 mb-4">
                                        <span class="bg-blue-100 text-blue-500 w-10 h-10 flex items-center justify-center rounded-full text-xl"><i class="fas fa-user"></i></span>
                                        <div><h3 class="font-black text-2xl text-slate-800">${mbtiA}</h3><p class="text-blue-400 font-bold text-xs">ë‚˜ì˜ í”„ë¡œí•„</p></div>
                                    </div>
                                    <p class="text-blue-500 font-bold text-lg mb-2">${traitA.tag}</p>
                                    <p class="text-slate-600 text-sm leading-relaxed mb-6 border-b border-slate-100 pb-4">${traitA.desc}</p>
                                    <div class="space-y-3 mb-6"><div class="flex gap-2 text-sm"><span class="text-blue-500 font-bold shrink-0">ì¥ì </span> <span class="text-slate-600">${traitA.strength}</span></div><div class="flex gap-2 text-sm"><span class="text-red-400 font-bold shrink-0">ë‹¨ì </span> <span class="text-slate-600">${traitA.weakness}</span></div></div>
                                </div>
                                <div class="relative mt-6 px-4">
                                    <div class="absolute left-8 -top-3 text-blue-300 text-3xl z-10"><i class="fas fa-quote-left"></i></div>
                                    <div class="bg-blue-500 text-white p-6 rounded-2xl rounded-tl-none shadow-lg relative bubble-left">
                                        <p class="text-[10px] font-bold opacity-70 mb-2 uppercase tracking-widest">${mbtiB}ë¥¼ ë³´ëŠ” ì†ë§ˆìŒ</p>
                                        <p class="font-medium text-lg leading-relaxed italic opacity-95">${viewAtoB}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="flex flex-col h-full md:flex-col-reverse">
                                <div class="bg-white p-8 rounded-[2rem] border border-pink-100 shadow-lg relative flex-1">
                                    <div class="flex items-center justify-end gap-3 mb-4">
                                        <div class="text-right"><h3 class="font-black text-2xl text-slate-800">${mbtiB}</h3><p class="text-pink-400 font-bold text-xs">ì—°ì¸ì˜ í”„ë¡œí•„</p></div>
                                        <span class="bg-pink-100 text-pink-500 w-10 h-10 flex items-center justify-center rounded-full text-xl"><i class="fas fa-heart"></i></span>
                                    </div>
                                    <p class="text-pink-500 font-bold text-lg mb-2 text-right">${traitB.tag}</p>
                                    <p class="text-slate-600 text-sm leading-relaxed mb-6 border-b border-slate-100 pb-4 text-right">${traitB.desc}</p>
                                    <div class="space-y-3 mb-6 text-right"><div class="flex gap-2 justify-end text-sm"><span class="text-slate-600">${traitB.strength}</span> <span class="text-pink-500 font-bold shrink-0">ì¥ì </span></div><div class="flex gap-2 justify-end text-sm"><span class="text-slate-600">${traitB.weakness}</span> <span class="text-red-400 font-bold shrink-0">ë‹¨ì </span></div></div>
                                </div>
                                <div class="relative mb-6 px-4">
                                    <div class="absolute right-8 -top-3 text-pink-300 text-3xl z-10"><i class="fas fa-quote-right"></i></div>
                                    <div class="bg-pink-500 text-white p-6 rounded-2xl rounded-tr-none shadow-lg relative bubble-right text-right">
                                        <p class="text-[10px] font-bold opacity-70 mb-2 uppercase tracking-widest">${mbtiA}ë¥¼ ë³´ëŠ” ì†ë§ˆìŒ</p>
                                        <p class="font-medium text-lg leading-relaxed italic opacity-95">${viewBtoA}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-12">
                            <div id="lock-screen" class="bg-slate-900 rounded-3xl p-10 text-center shadow-2xl relative overflow-hidden group">
                                <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
                                <div class="relative z-10">
                                    <i class="fas fa-lock text-5xl text-slate-600 mb-4 group-hover:text-yellow-400 transition-colors duration-500 animate-float-lock"></i>
                                    <h3 class="font-bold text-white text-2xl mb-2">ğŸ”’ ì•ˆ ì‹¸ìš°ëŠ” <span class="text-yellow-400">ì‹œí¬ë¦¿ ê¿€íŒ</span></h3>
                                    <p class="text-slate-400 text-sm mb-8">ëŒ€í™”ë²•, ë°ì´íŠ¸ ì¶”ì²œ, ì ˆëŒ€ ê¸ˆê¸°ì‚¬í•­ í™•ì¸í•˜ê¸°</p>
                                    
                                    <button id="coupang-trigger-btn" class="w-full md:w-auto px-10 py-4 text-white font-bold rounded-full shadow-lg transform transition hover:scale-105 coupang-btn-gradient flex items-center justify-center gap-3 mx-auto text-lg animate-pulse-glow">
                                        <span>ì¿ íŒ¡ ì•„ì´ì‡¼í•‘ 10ì´ˆë§Œ í•˜ê³  í™•ì¸í•˜ê¸°</span> <i class="fas fa-unlock-alt"></i>
                                    </button>
                                </div>
                            </div>
                            <div id="unlocked-content" class="hidden bg-white border-2 border-slate-900 rounded-3xl p-8 shadow-2xl relative">
                                <div class="absolute -top-5 left-1/2 -translate-x-1/2 bg-slate-900 text-yellow-400 px-6 py-2 rounded-full font-bold text-sm shadow-lg"><i class="fas fa-crown mr-2"></i>SECRET TIPS UNLOCKED</div>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                                    <div class="bg-blue-50 p-6 rounded-2xl text-center"><h4 class="font-bold text-slate-800 mb-2">ğŸ’¬ ëŒ€í™”ì˜ ê¸°ìˆ </h4><p class="text-sm text-slate-600 break-keep">ìƒëŒ€ì˜ ì„±í–¥ì„ ì¡´ì¤‘í•˜ë©°, ë¹„ë‚œë³´ë‹¤ëŠ” 'ë‚˜ì˜ ê°ì •'ì„ ë¨¼ì € ì´ì•¼ê¸°í•˜ì„¸ìš”. ë‹¤ë¦„ì„ ì¸ì •í•˜ëŠ” ê²ƒì´ ëŒ€í™”ì˜ ì‹œì‘ì…ë‹ˆë‹¤.</p></div>
                                    <div class="bg-pink-50 p-6 rounded-2xl text-center"><h4 class="font-bold text-slate-800 mb-2">ğŸŸï¸ ì¶”ì²œ ë°ì´íŠ¸</h4><p class="text-sm text-slate-600 break-keep">ì„œë¡œê°€ ì¢‹ì•„í•˜ëŠ” í™œë™ì„ ë²ˆê°ˆì•„ê°€ë©° í•˜ì„¸ìš”. ì´ë²ˆ ì£¼ëŠ” ${mbtiA}ì˜ ì·¨í–¥, ë‹¤ìŒ ì£¼ëŠ” ${mbtiB}ì˜ ì·¨í–¥ëŒ€ë¡œ!</p></div>
                                    <div class="bg-yellow-50 p-6 rounded-2xl text-center"><h4 class="font-bold text-slate-800 mb-2">âš ï¸ ì ˆëŒ€ ê¸ˆê¸°ì‚¬í•­</h4><p class="text-sm text-slate-600 break-keep font-bold">"ë„ˆëŠ” ì™œ ê·¸ë˜?"ë¼ëŠ” ë§ë¡œ ìƒëŒ€ë¥¼ ë°”ê¾¸ë ¤ í•˜ì§€ ë§ˆì„¸ìš”. ìˆëŠ” ê·¸ëŒ€ë¡œë¥¼ ì‚¬ë‘í•´ì£¼ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.</p></div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-8 pb-12 text-center">
                            <button onclick="window.open('https://link.coupang.com/a/dcbQl7', '_blank')" 
                                class="w-full md:w-auto px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-black text-lg rounded-full shadow-xl hover:scale-105 transition-transform bounce-custom flex items-center justify-center gap-2 mx-auto">
                                <span>ğŸ ${mbtiA}ë“¤ì´ í™˜ì¥í•˜ëŠ” ì¿ íŒ¡í…œ ë³´ëŸ¬ê°€ê¸°</span>
                                <i class="fas fa-gift"></i>
                            </button>
                        </div>

                    </div>
                `;

                document.getElementById('result-content').innerHTML = resultHTML;
                document.getElementById('input-page').classList.add('hidden');
                document.getElementById('result-page').classList.remove('hidden');
                window.scrollTo(0, 0);

                // 2. ë‘ ë²ˆì§¸ ë²„íŠ¼ ë¡œì§ (ì„¸ì…˜ í™•ì¸)
                document.getElementById('coupang-trigger-btn').addEventListener('click', () => {
                    // ì„¸ì…˜ í™•ì¸ í›„ ì¿ íŒ¡ ì—´ê¸°
                    if (!sessionStorage.getItem('coupang_visited')) {
                        window.open('https://link.coupang.com/a/dcbQl7', '_blank');
                        sessionStorage.setItem('coupang_visited', 'true');
                    }
                    
                    document.getElementById('lock-screen').classList.add('hidden');
                    const unlocked = document.getElementById('unlocked-content');
                    unlocked.classList.remove('hidden');
                    unlocked.classList.add('fade-in');
                });
            }

            function resetPage() {
                document.getElementById('input-page').classList.remove('hidden');
                document.getElementById('result-page').classList.add('hidden');
                document.getElementById('mbti-a').value = '';
                document.getElementById('mbti-b').value = '';
            }

            // ë™ì  íŒŒë¹„ì½˜ (í•˜íŠ¸+MBTI)
            window.updateFavicon = function(mbtiInput) {
                const mbti = mbtiInput.toUpperCase().trim();
                let topText = "MB";
                let bottomText = "TI";

                if (mbti.length === 4) {
                    topText = mbti.substring(0, 2);
                    bottomText = mbti.substring(2, 4);
                } else if (mbti.length > 0) {
                    topText = mbti.substring(0, Math.min(2, mbti.length));
                    bottomText = mbti.length > 2 ? mbti.substring(2) : "";
                }

                const svgString = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
                    <path fill='#ff6b6b' d='M50,88.9C25.5,65.3,5,45.5,5,28.6c0-14.9,12.1-26.6,27-26.6c8.7,0,16.6,4.3,21.5,10.9 c3.8-5.3,10.1-9.5,18.3-10.9C86.5,0.3,98,11.7,98,26.6c0,17-21.6,37.7-48,62.3H50z'/>
                    <style>.txt{fill:white;font-family:sans-serif;font-weight:900;text-anchor:middle}</style>
                    <text class='txt' x='50%' y='38' font-size='30'>${topText}</text>
                    <text class='txt' x='50%' y='68' font-size='30'>${bottomText}</text>
                </svg>`;

                const faviconUrl = "data:image/svg+xml," + encodeURIComponent(svgString);
                document.getElementById('dynamic-favicon').href = faviconUrl;
            }
            updateFavicon(""); // ì´ˆê¸°í™”

            document.getElementById('analyze-btn').addEventListener('click', validateAndAnalyze);
            document.getElementById('back-btn').addEventListener('click', resetPage);
        });
    </script>
</body>
</html>
