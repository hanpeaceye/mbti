<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>썸남썸녀 공략 가이드 | 그 사람의 마음을 여는 열쇠</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-33VJ9T8RW5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-33VJ9T8RW5');
    </script>
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://aimbti.xyz/some">
    <meta property="og:title" content="🔒 그 사람의 마음을 여는 열쇠 | MBTI 썸 공략 가이드">
    <meta property="og:description" content="내 성향은 살리고 상대방 취향은 저격하는 200% 맞춤형 플러팅 전략! 만남 어필 포인트부터 절대 금기어까지 대공개 💘">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/9355/9355325.png">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;800&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #f3e8ff; }
        
        .fade-in { animation: fadeIn 0.8s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .magic-card { background: linear-gradient(135deg, #ffffff, #fdf4ff); border: 1px solid #e9d5ff; box-shadow: 0 10px 30px rgba(147, 51, 234, 0.1); }
        .vs-badge { background: linear-gradient(45deg, #a855f7, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .coupang-btn-gradient { background: linear-gradient(to right, #e11f1f, #ff9000); }
        
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; border-color: #ef4444 !important; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        
        .strategy-box { border-left-width: 4px; transition: transform 0.2s; }
        .strategy-box:hover { transform: translateY(-2px); }
    </style>
</head>
<body class="text-slate-800 min-h-screen">

    <div class="w-full max-w-5xl mx-auto px-4 py-10">

        <div id="input-page" class="flex flex-col justify-center min-h-[85vh] fade-in">
            <div class="text-center mb-12">
                <span class="inline-block bg-white border border-purple-200 text-purple-600 text-xs font-bold px-4 py-1.5 rounded-full mb-4 shadow-sm tracking-wide">Flirting Strategy Guide</span>
                <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 mb-4 leading-tight">
                    그 사람,<br class="md:hidden">어떻게 <span class="text-purple-600">꼬셔야</span> 할까? 💘
                </h1>
                <p class="text-slate-500 text-base md:text-lg">내 성향은 살리고, 상대방 취향은 저격하는<br>맞춤형 썸 성공 가이드</p>
            </div>

            <div class="bg-white rounded-[2rem] p-8 md:p-12 shadow-2xl shadow-purple-200/50 max-w-3xl mx-auto w-full border border-purple-50 magic-card">
                <div class="flex flex-col gap-10">
                    <div class="flex flex-col md:flex-row items-center justify-between gap-8">
                        <div class="w-full group">
                            <label class="block text-sm font-bold text-slate-500 mb-3 ml-2">나의 MBTI</label>
                            <div class="relative">
                                <input id="mbti-a" list="mbti-list" oninput="this.value = this.value.toUpperCase()" class="w-full bg-purple-50/50 border-2 border-purple-100 rounded-2xl p-5 text-center text-3xl font-black uppercase text-slate-800 focus:border-purple-500 focus:ring-4 focus:ring-purple-100 outline-none transition placeholder-purple-200 tracking-widest" placeholder="ESTP" maxlength="4">
                            </div>
                        </div>
                        <span class="text-4xl font-black italic vs-badge">TO</span>
                        <div class="w-full group">
                            <label class="block text-sm font-bold text-slate-500 mb-3 ml-2">상대방 MBTI</label>
                            <div class="relative">
                                <input id="mbti-b" list="mbti-list" oninput="this.value = this.value.toUpperCase()" class="w-full bg-pink-50/50 border-2 border-pink-100 rounded-2xl p-5 text-center text-3xl font-black uppercase text-slate-800 focus:border-pink-500 focus:ring-4 focus:ring-pink-100 outline-none transition placeholder-pink-200 tracking-widest" placeholder="INFJ" maxlength="4">
                            </div>
                        </div>
                    </div>
                    
                    <button id="analyze-btn" class="w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-6 rounded-2xl shadow-xl hover:shadow-2xl text-lg md:text-xl active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-3 group">
                        <span>결과 보기</span> <i class="fas fa-key group-hover:rotate-45 transition-transform"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="result-page" class="hidden fade-in pb-20">
            <div class="max-w-4xl mx-auto mb-8 flex items-center justify-between">
                <button id="back-btn" class="text-slate-400 hover:text-slate-800 font-bold flex items-center gap-2 transition-colors px-4 py-2 rounded-lg hover:bg-white/50">
                    <i class="fas fa-arrow-left"></i> 다시하기
                </button>
                <span class="text-xs font-bold text-purple-500 bg-purple-100 px-3 py-1 rounded-full">PREMIUM REPORT</span>
            </div>
            <div id="result-content"></div>
        </div>

    </div>

    <datalist id="mbti-list"></datalist>
    <link id="dynamic-favicon" rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🗝️</text></svg>">

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const validMbtiList = ["ISTJ","ISFJ","INFJ","INTJ","ISTP","ISFP","INFP","INTP","ESTP","ESFP","ENFP","ENTP","ESTJ","ESFJ","ENFJ","ENTJ"];
            const dataList = document.getElementById('mbti-list');
            validMbtiList.forEach(t => { let opt = document.createElement('option'); opt.value = t; dataList.appendChild(opt); });

            // 1. [상대방 분석] 상세 데이터 (16개 유형 * 2가지 버전 = 총 32개 페르소나)
            const mbtiData = {
                "ISTJ": [
                    { type: "신중한 계획가형", like: "오차 없는 시간 약속, 깔끔하게 정돈된 외모, 예측 가능한 일정", dislike: "갑작스러운 번개 만남, 시끄럽고 무질서한 곳, 허세 부리는 말투", tip: "애매하게 '언제 밥 한번 먹자'는 말은 독입니다. '이번 주 토요일 6시에 강남역 3번 출구'처럼 구체적으로 제안하세요." },
                    { type: "묵직한 원칙주의자형", like: "자신의 말에 책임을 지는 태도, 맡은 일에 최선을 다하는 모습", dislike: "약속을 쉽게 어기는 것, 감정적으로 징징거리는 것, 예의 없는 행동", tip: "가벼운 칭찬보다는 그 사람의 성실함과 능력에 대한 '인정'이 훨씬 강력하게 먹힙니다." }
                ],
                "ISFJ": [
                    { type: "섬세한 배려왕형", like: "지나가듯 했던 사소한 말 기억해주기, 식당 직원에게 친절한 모습", dislike: "강한 자기주장으로 몰아붙이는 것, 무례하고 거친 언행", tip: "당신이 안전하고 따뜻한 사람이라는 확신이 들 때까지 기다려주세요. 급발진은 절대 금물입니다." },
                    { type: "가정적인 평화주의자형", like: "안정적이고 차분한 데이트, 진심이 담긴 감사 인사와 손편지", dislike: "갈등 상황을 만드는 것, 연락이 잘 안 되는 것, 불안정한 태도", tip: "화려한 이벤트보다 소소한 일상을 공유하며 '나랑 있으면 편안해'라는 느낌을 주세요." }
                ],
                "INFJ": [
                    { type: "속 깊은 철학자형", like: "둘만의 깊은 대화(가치관, 인생), 조용한 곳, 진정성 있는 눈빛", dislike: "가벼운 농담 따먹기만 하는 것, 거짓말, 시끄러운 파티", tip: "당신의 화려한 겉모습보다 내면에 관심을 가져주세요. '너는 어떻게 생각해?'라고 깊게 물어봐 주세요." },
                    { type: "신비로운 예언가형", like: "나의 도덕적 신념을 지지해주는 사람, 예의 바르고 배려 깊은 태도", dislike: "선 넘는 장난, 남을 깎아내리는 뒷담화, 훅 들어오는 스킨십", tip: "천천히 스며들어야 합니다. 그 사람의 선을 존중하면서 신뢰를 쌓는 것이 최우선입니다." }
                ],
                "INTJ": [
                    { type: "지적인 야망가형", like: "논리적이고 건설적인 대화, 배울 점이 있는 유능한 모습", dislike: "감정에만 호소하는 징징거림, 멍청하거나 무계획적인 행동", tip: "당신이 꽤 스마트하고 비전 있는 사람이라는 걸 은연중에 어필하세요. 뇌가 섹시한 사람을 좋아합니다." },
                    { type: "차가운 전략가형", like: "효율적인 데이트 코스, 내 목표를 지지해주는 든든한 파트너", dislike: "시간 낭비하는 것, 뻔한 아부나 빈말, 돌려 말하는 화법", tip: "밀당하지 마세요. 호감이 있다면 직설적이고 논리적으로 제안하는 것이 가장 효과적입니다." }
                ],
                "ISTP": [
                    { type: "시크한 마이웨이형", like: "혼자만의 시간 존중, 쿨한 태도, 용건만 간단히 하는 깔끔함", dislike: "질척거리는 집착, 감정적인 드라마 찍기, 답장 재촉", tip: "고양이 다루듯 하세요. 다가오면 놀아주고, 멀어지면 놔두세요. 쫓아가면 도망갑니다." },
                    { type: "만능 해결사형", like: "함께 즐기는 액티비티나 취미 공유, 기계를 잘 다루거나 센스 있는 모습", dislike: "말만 앞서고 행동하지 않는 것, 비효율적인 상황, 꼰대질", tip: "말보다는 행동으로 보여주세요. 같이 게임을 하거나 운동을 하는 등 몸을 움직이는 데이트가 좋습니다." }
                ],
                "ISFP": [
                    { type: "감성적인 예술가형", like: "감각적인 인테리어의 장소, 세심하게 챙겨주는 매너, 예쁜 칭찬", dislike: "결정을 강요하는 것, 목소리 크고 거친 사람, 비판적인 지적", tip: "리드는 당신이 하되 강요는 마세요. '이거 어때?'라고 부드럽게 물어봐 주는 게 포인트입니다." },
                    { type: "평화로운 눕방러형", like: "편안한 분위기, 맛있는 음식, 나의 취향을 존중해주는 태도", dislike: "싸움이나 갈등 상황, 빡빡한 스케줄, 나를 가르치려 드는 것", tip: "그 사람의 패션이나 취향을 구체적으로 칭찬해주세요. 편안함 속에 설렘을 한 스푼 넣어야 합니다." }
                ],
                "INFP": [
                    { type: "낭만적인 몽상가형", like: "나의 감정에 깊이 공감해주는 것, 낭만적인 분위기, 예쁜 말과 편지", dislike: "차가운 팩트 폭격, 내 말을 무시하는 태도, 속물적인 대화", tip: "현실적인 조언보다는 무조건적인 내 편이 되어주세요. 작은 선물이나 손편지에 크게 감동합니다." },
                    { type: "수줍은 팅커벨형", like: "나의 독특한 취향을 존중해주는 것, 조용히 챙겨주는 세심함", dislike: "전통적인 가치관 강요, 강압적인 분위기, 공개적인 망신", tip: "그 사람의 상상력과 꿈을 응원해주세요. '너는 정말 특별한 사람이야'라는 느낌을 줘야 합니다." }
                ],
                "INTP": [
                    { type: "호기심 많은 괴짜형", like: "나의 마이너한 관심사를 흥미롭게 들어주는 것, 지적인 자극", dislike: "뻔한 스몰토크(날씨, 밥), 논리 없는 주장, 감정 강요", tip: "그 사람이 꽂혀있는 주제에 대해 질문하세요. 신나서 떠들기 시작하면 이미 반은 넘어온 겁니다." },
                    { type: "게으른 천재형", like: "멍 때리는 시간 존중, 효율적인 대화, 엉뚱한 유머 코드", dislike: "사생활을 꼬치꼬치 캐묻는 것, 멍청한 행동, 집착", tip: "너무 자주 연락하거나 만나자고 조르지 마세요. 각자의 시간을 즐기는 쿨한 관계를 지향합니다." }
                ],
                "ESTP": [
                    { type: "화끈한 직진러형", like: "스릴 넘치는 액티비티, 돌려 말하지 않는 직설적인 호감 표현", dislike: "답답하게 구는 것, 빙빙 돌려 말하기, 지나치게 진지한 분위기", tip: "밀당은 시간 낭비입니다. 같이 있으면 세상에서 제일 재밌는 사람이라는 걸 보여주세요." },
                    { type: "쿨한 승부사형", like: "맛집 탐방, 내기나 게임, 센스 있는 유머 감각, 힙한 스타일", dislike: "구속하거나 통제하려는 시도, 징징거리는 태도, 우유부단함", tip: "고민할 시간에 일단 지르세요! '지금 나와, 드라이브 가자' 같은 박력 있는 제안이 먹힙니다." }
                ],
                "ESFP": [
                    { type: "주인공 본능 연예인형", like: "나에게 쏟아지는 관심, 서프라이즈 이벤트, 무한 리액션", dislike: "침묵과 정적, 나를 투명 인간 취급하는 것, 지루한 설교", tip: "텐션을 올리세요! '너랑 있으니까 진짜 재밌다', '오늘 옷 너무 예쁘다' 칭찬 폭격이 필요합니다." },
                    { type: "자유로운 영혼형", like: "핫플레이스 데이트, 즉흥적인 만남, 즐겁고 긍정적인 바이브", dislike: "집에만 있는 데이트, 심각하고 우울한 얘기, 구속하는 것", tip: "심각한 얘기는 나중에 하세요. 일단 만나서 즐겁게 놀고 웃게 만드는 게 우선입니다." }
                ],
                "ENFP": [
                    { type: "사랑둥이 댕댕이형", like: "우쭈쭈 해주기, 나의 엉뚱한 말에도 맞장구쳐주는 태도", dislike: "무관심, 차가운 반응, 엄격한 규칙이나 규율 강요", tip: "사소한 변화도 알아봐 주고 칭찬해주세요. 당신의 관심이 곧 사랑의 척도라고 생각합니다." },
                    { type: "열정적인 스파크형", like: "갑자기 떠나는 여행, 끊임없는 애정 표현, 새로운 경험", dislike: "반복되는 지루한 일상, 혼자 방치해 두는 것, 현실적인 잔소리", tip: "그 사람의 꿈과 열정을 응원해주세요. 현실적인 조언보다는 '너라면 할 수 있어!'가 필요합니다." }
                ],
                "ENTP": [
                    { type: "매력적인 논쟁가형", like: "말싸움(토론)을 즐겁게 받아주는 티키타카, 새로운 아이디어", dislike: "권위적으로 찍어 누르려는 태도, 무조건적인 복종 강요", tip: "논쟁을 피하지 말고 즐기세요. 지적으로 대등한 상대라고 느낄 때 강렬한 끌림을 느낍니다." },
                    { type: "유쾌한 발명가형", like: "나를 인정하고 치켜세워 주는 것, 쿨하고 독립적인 태도", dislike: "뻔하고 지루한 칭찬, 감정적으로 매달리는 것, 통제", tip: "함께 있으면 지루할 틈이 없는 사람이라는 걸 보여주세요. 뻔한 데이트 코스는 금물입니다." }
                ],
                "ESTJ": [
                    { type: "확실한 리더형", like: "자신의 일에 몰입하는 능력 있는 모습, 확실한 호불호 표현", dislike: "우유부단하게 결정 못 하는 모습, 약속 어기는 것, 게으름", tip: "감정보다는 이성에 호소하세요. 당신이 배울 점이 있고 미래를 함께 그릴 수 있는 사람임을 어필하세요." },
                    { type: "현실적인 관리자형", like: "시간 약속 칼같이 지키기, 체계적이고 효율적인 데이트", dislike: "징징거리며 감정 쓰레기통 취급하는 것, 무능력한 모습", tip: "데이트 계획을 짤 때 주도적으로 하거나, 상대방의 계획을 완벽하게 따라주세요. 어설픈 건 싫어합니다." }
                ],
                "ESFJ": [
                    { type: "다정한 인싸형", like: "고맙다는 표현 자주 하기, 내 사람들을 챙겨주는 세심함", dislike: "차가운 반응이나 읽씹, 내가 베푼 호의를 무시하는 것", tip: "그 사람이 베푸는 친절에 크게 감동하고 표현하세요. '너 같은 사람 처음이야'라는 말이 특효약입니다." },
                    { type: "사교적인 외교관형", like: "빠른 답장과 활발한 리액션, 계획적인 데이트, 예의 바름", dislike: "비판적인 태도나 지적, 사회적 규범을 어기는 무례함", tip: "맞장구와 리액션이 생명입니다. 대화할 때 눈을 맞추고 고개를 끄덕여주는 것만으로도 점수를 땁니다." }
                ],
                "ENFJ": [
                    { type: "열정적인 코치형", like: "나의 꿈과 비전을 진심으로 응원해주는 것, 긍정적인 대화", dislike: "이기적인 행동, 고마워할 줄 모르는 태도, 비관적인 말", tip: "그 사람의 선한 영향력을 칭찬하세요. '너 덕분에 내가 더 좋은 사람이 된 것 같아'는 최고의 고백입니다." },
                    { type: "따뜻한 카리스마형", like: "먼저 다가와서 챙겨주는 따뜻함, 열정적인 리액션과 공감", dislike: "사회적 약자에 대한 무례함, 예의 없는 행동, 차가움", tip: "당신도 따뜻하고 정의로운 사람이라는 것을 보여주세요. 함께 봉사활동을 가거나 배려하는 모습을 보여주세요." }
                ],
                "ENTJ": [
                    { type: "카리스마 대장형", like: "도전적이고 야망 있는 모습, 직설적이고 솔직한 화법", dislike: "감성팔이하며 의존하려는 모습, 무능력하고 게으른 태도", tip: "주눅 들지 말고 당당하게 대하세요. 자신의 일에 몰입하고 성취해내는 멋진 모습을 보여줄 때 반합니다." },
                    { type: "철두철미한 지휘관형", like: "일 잘하는 프로페셔널함, 끊임없이 자기계발하는 사람", dislike: "시간 낭비하는 무의미한 대화, 주관 없이 휩쓸리는 모습", tip: "효율성을 중시하세요. 용건은 간단히, 데이트는 알차게. 당신이 '성장하는 사람'이라는 확신을 줘야 합니다." }
                ]
            };

            // 2. [맞춤형 전략] 기본 분석 (ME based)
            function getMyStrategy(me, you) {
                let text = ""; let subText = "";
                if (me.includes('E') && you.includes('I')) {
                    text = "🔥 <b>당신의 넘치는 에너지가 상대에겐 부담일 수 있어요.</b><br>질문하고 대답을 재촉하지 말고 <b>'침묵의 3초'</b>를 견디세요. 상대방은 생각할 시간이 필요합니다.";
                    subText = "천천히 다가가면 의외로 말문이 터질 거예요.";
                } else if (me.includes('I') && you.includes('E')) {
                    text = "🔊 <b>상대방은 당신의 반응을 목빠지게 기다리고 있어요.</b><br>평소보다 <b>리액션 볼륨을 1.5배 키우고</b>, 가끔은 먼저 '뭐해?'라고 선톡을 날려보세요.";
                    subText = "당신의 작은 표현에 상대는 감동합니다.";
                } else {
                    text = "🤝 <b>에너지 레벨이 비슷해서 금방 친해지겠네요!</b><br>하지만 너무 친구같이 편해질 수 있으니, 가끔은 이성적인 긴장감을 주는 멘트나 스킨십을 시도하세요.";
                    subText = "편안함 속에 설렘 한 스푼이 필요해요.";
                }
                return { text, subText };
            }

            // 3. [NEW] 실전 만남 전략 (어필 & 조심)
            function getMeetingStrategy(me, you) {
                let appeal = "";
                let beware = "";

                // APPEAL: 상대방이 좋아하는 것
                if (you.includes('S')) {
                    appeal = `👀 <b>시각적/감각적 디테일 챙기기</b><br>
                    ${you}는 눈에 보이는 것을 믿습니다. <b>단정하고 센스 있는 옷차림, 좋은 향기</b>는 기본입니다.
                    추상적인 미래 얘기보다는 <b>"지금 맛있는 거", "오늘 날씨", "눈앞의 예쁜 풍경"</b>에 대해 구체적으로 이야기하세요.`;
                } else { // N Target
                    appeal = `✨ <b>상상력과 가치관 자극하기</b><br>
                    ${you}는 뻔한 일상 대화보다 <b>"만약에 우리가...", "너는 인생에서 뭐가 제일 중요해?"</b> 같은 심오한 질문을 좋아합니다.
                    당신의 <b>독특한 취향이나 꿈</b>을 솔직하게 이야기하세요.`;
                }

                // BEWARE: 상대방이 싫어하는 것
                if (you.includes('J')) {
                    beware = `⏰ <b>시간 약속과 계획 변경 주의</b><br>
                    ${you}에게 <b>지각은 곧 신뢰 하락</b>입니다. 약속 시간 10분 전에 도착해 있는 모습을 보여주세요.
                    "그냥 만나서 정하자"는 말은 ${you}를 불안하게 합니다. 최소한 <b>선택지 2개 정도는 미리 찾아가세요.</b>`;
                } else { // P Target
                    beware = `🙅‍♂️ <b>통제하려는 태도 금지</b><br>
                    ${you}는 자유로운 영혼입니다. <b>"이거 해야 돼", "저거 해야 돼"</b> 하며 가르치려 들거나 통제하려 하지 마세요.
                    예상치 못한 변수가 생겨도 <b>"오히려 좋아! 다른 데 가보자"</b> 하며 웃어넘기는 유연함이 필요합니다.`;
                }

                if (you.includes('T')) {
                    appeal += `<br><br>🧠 <b>논리적이고 똑부러지는 모습</b><br>고민을 말할 때 감정에만 호소하기보다 <b>"그래서 이렇게 해결하려고 해"</b>라고 주관을 보여주세요.`;
                } else {
                    appeal += `<br><br>💖 <b>무조건적인 공감과 리액션</b><br>대화 중간중간 <b>눈을 맞추고 고개를 끄덕여주세요.</b> 사소한 변화를 알아봐 주는 것이 킬링 포인트입니다.`;
                }

                return { appeal, beware };
            }

            // 4. [NEW] 메신저 필승 공략법 (카톡)
            function getMessengerStrategy(targetMBTI) {
                let style = "", good = "", bad = "";

                if (targetMBTI.includes('E')) {
                    style = "🚀 <b>칼답과 티키타카가 생명!</b> 연락 텀이 길어지면 식어버립니다.";
                } else {
                    style = "🐢 <b>천천히, 그러나 꾸준히!</b> 재촉하지 말고 일상을 잔잔하게 공유하세요.";
                }

                if (targetMBTI.includes('F')) {
                    good = "🥰 <b>공감+질문:</b> '오늘 힘들었지?ㅠㅠ 저녁은 맛있는 거 먹어!'";
                    bad = "🤖 <b>단답형 팩트:</b> 'ㅇㅇ', '그래서?', '해결책은 이거네'";
                } else { // T
                    good = "🧠 <b>유용한 정보/흥미로운 기사:</b> '이거 너가 좋아할 것 같아서 가져옴'";
                    bad = "😭 <b>밑도 끝도 없는 징징거림:</b> '나 우울해... (이유 안 말함)'";
                }
                return { style, good, bad };
            }

            function validateAndAnalyze() {
                const inputA = document.getElementById('mbti-a');
                const inputB = document.getElementById('mbti-b');
                const valA = inputA.value.toUpperCase().trim();
                const valB = inputB.value.toUpperCase().trim();

                if (!validMbtiList.includes(valA) || !validMbtiList.includes(valB)) {
                    alert("정확한 MBTI 4글자를 입력해주세요!");
                    return;
                }
                showResult(valA, valB);
            }

            function showResult(me, you) {
                // [NEW LOGIC] 랜덤으로 2개 중 하나 선택 + 같은 타입일 때 겹치지 않게 처리
                const targetDataArray = mbtiData[you];
                let selectedIndex = Math.floor(Math.random() * targetDataArray.length);
                
                // 만약 나와 상대방이 같은 MBTI라면? (여기서는 상대방 분석만 보여주므로 큰 상관 없지만 다양성을 위해)
                // 현재 페이지는 "상대방 공략"이 메인이므로, 매번 랜덤하게 다른 페르소나가 나오는 것만으로도 충분합니다.
                // 다만, 확실한 다양성을 위해 세션에 이전 인덱스를 저장했다가 다른 걸 보여주는 로직을 추가할 수도 있습니다.
                // 여기서는 심플하게 랜덤 선택으로 갑니다. (확률 50%)

                const target = targetDataArray[selectedIndex];
                const strategy = getMyStrategy(me, you);
                const meeting = getMeetingStrategy(me, you);
                const messenger = getMessengerStrategy(you);

                const resultHTML = `
                    <div class="max-w-4xl mx-auto space-y-10">
                        
                        <div class="magic-card rounded-3xl p-8 text-center relative overflow-hidden">
                            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-purple-400 to-pink-400"></div>
                            <p class="text-xs font-bold text-slate-400 mb-2 tracking-widest bg-slate-100 inline-block px-3 py-1 rounded-full">TARGET ANALYSIS</p>
                            <h2 class="text-3xl font-extrabold text-slate-800 mb-4 mt-2">
                                <span class="text-purple-600">${you}</span>는<br>"${target.type}"
                            </h2>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-8 text-left">
                                <div class="bg-blue-50 p-5 rounded-2xl border border-blue-100">
                                    <p class="font-bold text-blue-600 mb-2 flex items-center"><i class="fas fa-check-circle mr-2"></i>좋아하는 것 (DO)</p>
                                    <p class="text-slate-700 text-sm leading-relaxed word-keep">${target.like}</p>
                                </div>
                                <div class="bg-red-50 p-5 rounded-2xl border border-red-100">
                                    <p class="font-bold text-red-500 mb-2 flex items-center"><i class="fas fa-times-circle mr-2"></i>싫어하는 것 (DON'T)</p>
                                    <p class="text-slate-700 text-sm leading-relaxed word-keep">${target.dislike}</p>
                                </div>
                            </div>
                            <div class="mt-6 bg-slate-50 p-4 rounded-xl text-sm text-slate-600">
                                <span class="font-bold text-purple-600">💡 핵심 꿀팁:</span> ${target.tip}
                            </div>
                        </div>

                        <div class="bg-white rounded-3xl p-8 border-2 border-slate-800 shadow-xl relative">
                            <div class="absolute -top-4 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-6 py-2 rounded-full font-bold text-sm shadow-lg w-max">
                                <i class="fas fa-user-secret mr-2"></i>${me}가 ${you}를 꼬시는 법
                            </div>
                            <div class="mt-6 text-center">
                                <p class="text-lg font-bold text-slate-800 mb-4 leading-relaxed break-keep">${strategy.text}</p>
                                <p class="text-sm text-slate-500 font-medium">"${strategy.subText}"</p>
                            </div>
                        </div>

                        <div class="mt-12">
                            <div class="bg-white border-2 border-purple-500 rounded-3xl p-8 shadow-2xl relative fade-in">
                                <div class="absolute -top-5 left-1/2 -translate-x-1/2 bg-purple-500 text-white px-6 py-2 rounded-full font-bold text-sm shadow-lg">
                                    <i class="fas fa-crown mr-2"></i>PREMIUM GUIDE UNLOCKED
                                </div>
                                
                                <h4 class="font-bold text-2xl text-center text-slate-800 mb-8 mt-4">✨ 실전 만남 & 연락 전략</h4>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
                                    <div class="bg-green-50 rounded-2xl p-6 strategy-box border-green-400">
                                        <h5 class="font-bold text-green-700 text-lg mb-3 flex items-center"><i class="fas fa-bullseye mr-2"></i>만났을 때 어필 포인트</h5>
                                        <p class="text-slate-700 text-sm leading-relaxed break-keep">${meeting.appeal}</p>
                                    </div>
                                    <div class="bg-orange-50 rounded-2xl p-6 strategy-box border-orange-400">
                                        <h5 class="font-bold text-orange-700 text-lg mb-3 flex items-center"><i class="fas fa-exclamation-triangle mr-2"></i>만났을 때 조심할 점</h5>
                                        <p class="text-slate-700 text-sm leading-relaxed break-keep">${meeting.beware}</p>
                                    </div>
                                </div>

                                <div class="bg-yellow-50 rounded-2xl p-6 border border-yellow-200">
                                    <h5 class="font-bold text-yellow-800 text-lg mb-4 text-center"><i class="fas fa-comment-dots mr-2"></i>${you} 맞춤형 카톡 공략</h5>
                                    <div class="space-y-4">
                                        <div class="bg-white p-4 rounded-xl border border-yellow-100">
                                            <p class="font-bold text-slate-800 mb-1">📢 연락 스타일</p>
                                            <p class="text-sm text-slate-600 leading-relaxed">${messenger.style}</p>
                                        </div>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                            <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                                                <p class="font-bold text-blue-600 mb-1">🙆‍♂️ 추천 (Good)</p>
                                                <p class="text-sm text-slate-600 leading-relaxed">${messenger.good}</p>
                                            </div>
                                            <div class="bg-red-50 p-4 rounded-xl border border-red-100">
                                                <p class="font-bold text-red-500 mb-1">🙅‍♀️ 금지 (Bad)</p>
                                                <p class="text-sm text-slate-600 leading-relaxed">${messenger.bad}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="mt-8 pb-20 text-center">
                            <a href="https://link.coupang.com/a/ddcSv0" target="_blank" class="inline-flex items-center justify-center gap-2 w-full md:w-auto px-8 py-4 bg-gradient-to-r from-emerald-400 to-cyan-500 text-white font-black text-lg rounded-full shadow-xl hover:scale-105 transition-transform bounce-custom">
                                <span>✈️ ${me} & ${you}가 환장하는 여행지 쿠팡에서 보기</span>
                            </a>
                        </div>
                        <div class="mt-10 pb-20 text-center">
                            <a href="https://link.coupang.com/a/ddddJ5" target="_blank" class="inline-flex items-center justify-center gap-2 w-full md:w-auto px-8 py-5 bg-gradient-to-r from-pink-500 via-rose-500 to-purple-600 text-white font-black text-lg md:text-xl rounded-full shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 bounce-custom">
                                <i class="fas fa-gift"></i>
                                <span>🎁 ${you} 상대방이 좋아할만한 선물 쿠팡에서 고르기</span>
                            </a>
                        </div>

                        <div class="mt-12 pb-12">
                            <h3 class="text-center font-bold text-lg text-slate-700 mb-4 animate-bounce">
                                🛍️ <span class="text-purple-600">${me}</span> & <span class="text-pink-500">${you}</span> 취향저격 선물
                            </h3>
                            <div class="flex justify-center w-full">
                                <div id="coupang-banner-frame" style="width: 100%; max-width: 680px; height: 160px; overflow: hidden;"></div>
                            </div>
                        </div>

                    </div>
                `;

                document.getElementById('result-content').innerHTML = resultHTML;
                document.getElementById('input-page').classList.add('hidden');
                document.getElementById('result-page').classList.remove('hidden');
                window.scrollTo(0, 0);

                // 쿠팡 배너 주입
                setTimeout(() => {
                    const bannerFrame = document.getElementById('coupang-banner-frame');
                    if (bannerFrame) {
                        const iframe = document.createElement('iframe');
                        iframe.style.width = '100%'; iframe.style.height = '100%'; iframe.style.border = 'none'; iframe.scrolling = 'no';
                        bannerFrame.appendChild(iframe);
                        const doc = iframe.contentWindow.document;
                        doc.open();
                        doc.write(`
                            <body style="margin:0; padding:0; display:flex; justify-content:center; align-items:center; overflow:hidden;">
                                <script src="https://ads-partners.coupang.com/g.js"><\/script>
                                <script> new PartnersCoupang.G({"id":949693,"template":"carousel","trackingCode":"AF3238435","width":"680","height":"160","tsource":""}); <\/script>
                            </body>
                        `);
                        doc.close();
                    }
                }, 100);
            }

            function resetPage() {
                document.getElementById('input-page').classList.remove('hidden');
                document.getElementById('result-page').classList.add('hidden');
                document.getElementById('mbti-a').value = '';
                document.getElementById('mbti-b').value = '';
            }

            document.getElementById('analyze-btn').addEventListener('click', validateAndAnalyze);
            document.getElementById('back-btn').addEventListener('click', resetPage);
        });
    </script>
</body>
</html>
